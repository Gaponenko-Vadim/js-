# –û—Ç—á—ë—Ç –ø–æ –∞–Ω–∞–ª–∏–∑—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

> **–î–∞—Ç–∞:** 2026-01-28
> **–°—Ç–∞—Ç—É—Å —Å—Ö–µ–º—ã:** ‚úÖ –í–∞–ª–∏–¥–Ω–∞ (`npx prisma validate`)

---

## üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Å–µ–≥–æ –º–æ–¥–µ–ª–µ–π:** 15
- **ENUM —Ç–∏–ø–æ–≤:** 4
- **Junction tables (Many-to-Many):** 5
- **–ú–æ–¥–µ–ª–µ–π —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏:** 14
- **–í—Å–µ–≥–æ –∏–Ω–¥–µ–∫—Å–æ–≤:** 35+

---

## ‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏

| –ú–æ–¥–µ–ª—å | –ü–æ–ª—è | –°–≤—è–∑–∏ | –ò–Ω–¥–µ–∫—Å—ã | –°—Ç–∞—Ç—É—Å |
|--------|------|-------|---------|--------|
| **User** | 7 | 5 relations | 1 (auto) | ‚úÖ |
| **Category** | 8 | 3 relations | 3 | ‚úÖ |
| **Test** | 6 | 5 relations | 2 | ‚úÖ |
| **Question** | 6 | 2 relations | 1 | ‚úÖ |
| **TestResult** | 6 | 2 relations | 5 | ‚úÖ |
| **PomodoroSession** | 4 | 1 relation | 3 | ‚úÖ |
| **CombinedTestResult** | 8 | 1 relation | 2 | ‚úÖ |
| **Lecture** | 7 | 2 relations | 0 | ‚ö†Ô∏è |
| **LectureTaskProgress** | 5 | 2 relations | 3 | ‚úÖ |

### Junction Tables (Many-to-Many)

| Junction Table | –°–≤—è–∑—ã–≤–∞–µ—Ç | Unique constraint | Index | –°—Ç–∞—Ç—É—Å |
|----------------|-----------|-------------------|-------|--------|
| **TestQuestion** | Test ‚Üî Question | ‚úÖ [testId, questionId] | ‚úÖ [testId, order] | ‚úÖ |
| **CategoryTest** | Category ‚Üî Test | ‚úÖ [categoryId, testId] | ‚úÖ [categoryId, order] | ‚úÖ |
| **CollectionTest** | Collection ‚Üî Test | ‚úÖ [collectionId, testId] | ‚úÖ [collectionId, order] | ‚úÖ |
| **UserTestListItem** | UserTestList ‚Üî Test | ‚úÖ [listId, testId] | ‚úÖ [listId, order] | ‚úÖ |

### –ö–æ–ª–ª–µ–∫—Ü–∏–∏

| –ú–æ–¥–µ–ª—å | –ü–æ–ª—è | –ò–Ω–¥–µ–∫—Å—ã | –°—Ç–∞—Ç—É—Å |
|--------|------|---------|--------|
| **Collection** | 10 | 3 | ‚úÖ |
| **UserTestList** | 8 | 1 | ‚úÖ |

---

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏–Ω–¥–µ–∫—Å–æ–≤

### User
```prisma
model User {
  id    String @id @default(cuid())
  email String @unique  // ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π unique index

  // –ò–Ω–¥–µ–∫—Å—ã:
  // ‚úÖ email (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —á–µ—Ä–µ–∑ @unique)
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:** Email –∏–º–µ–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω–¥–µ–∫—Å —á–µ—Ä–µ–∑ @unique

---

### Category
```prisma
model Category {
  @@index([slug])      // ‚úÖ –î–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ slug
  @@index([parentId])  // ‚úÖ –î–ª—è –∏–µ—Ä–∞—Ä—Ö–∏–∏
  @@index([order])     // ‚úÖ –î–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- `slug` - –ø–æ–∏—Å–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ URL
- `parentId` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- `order` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

---

### Test
```prisma
model Test {
  @@index([difficulty])  // ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
  @@index([title])       // ‚úÖ –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- `difficulty` - —Ñ–∏–ª—å—Ç—Ä —Ç–µ—Å—Ç–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—é (beginner/intermediate/advanced)
- `title` - –ø–æ–∏—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å composite index `[difficulty, title]` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞ + –ø–æ–∏—Å–∫–∞

---

### Question
```prisma
model Question {
  @@index([lectureId])  // ‚úÖ –î–ª—è –ø–æ–∏—Å–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ –ª–µ–∫—Ü–∏–∏
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–ø—Ä–æ—Å–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –ª–µ–∫—Ü–∏–µ–π

---

### TestQuestion (Junction)
```prisma
model TestQuestion {
  @@unique([testId, questionId])  // ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã
  @@index([testId, order])        // ‚úÖ –î–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- `unique` - –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–≤–∞–∂–¥—ã –≤ —Ç–µ—Å—Ç–µ
- `[testId, order]` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ —Ç–µ—Å—Ç–∞ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ

---

### TestResult
```prisma
model TestResult {
  @@index([userId])              // ‚úÖ –í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  @@index([testId])              // ‚úÖ –í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞
  @@index([userId, completedAt]) // ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π)
  @@index([testId, score])       // ‚úÖ –õ–∏–¥–µ—Ä–±–æ—Ä–¥ —Ç–µ—Å—Ç–∞
  @@index([userId, mode])        // ‚úÖ –§–∏–ª—å—Ç—Ä –ø–æ —Ä–µ–∂–∏–º—É (learning/exam)
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û—Ç–ª–∏—á–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- `/api/results` - –∏—Å—Ç–æ—Ä–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –ø–æ –¥–∞—Ç–µ
- –õ–∏–¥–µ—Ä–±–æ—Ä–¥—ã —Ç–µ—Å—Ç–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–µ–∂–∏–º–∞–º

---

### PomodoroSession
```prisma
model PomodoroSession {
  @@index([userId])              // ‚úÖ –°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  @@index([userId, completedAt]) // ‚úÖ –ò—Å—Ç–æ—Ä–∏—è —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π
  @@index([type])                // ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ò—Å—Ç–æ—Ä–∏—è Pomodoro —Å–µ—Å—Å–∏–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

### CombinedTestResult
```prisma
model CombinedTestResult {
  @@index([userId])      // ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  @@index([completedAt]) // ‚úÖ –•—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—è–¥–æ–∫
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ

---

### Lecture
```prisma
model Lecture {
  id    String @id @default(cuid())
  title String
  topic String
  // ‚ö†Ô∏è –ù–ï–¢ –ò–ù–î–ï–ö–°–û–í!
}
```
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–æ–∏—Å–∫–µ –ª–µ–∫—Ü–∏–π –ø–æ `title` –∏–ª–∏ `topic` –±—É–¥–µ—Ç FULL TABLE SCAN

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```prisma
model Lecture {
  // ... fields

  @@index([title])  // –î–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
  @@index([topic])  // –î–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ —Ç–µ–º–µ
}
```

---

### LectureTaskProgress
```prisma
model LectureTaskProgress {
  @@unique([userId, lectureId, taskId])  // ‚úÖ –û–¥–∏–Ω —Ç–∞—Å–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–∞–∑
  @@index([userId])                       // ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  @@index([lectureId])                    // ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –ª–µ–∫—Ü–∏–∏
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ

---

### CategoryTest (Junction)
```prisma
model CategoryTest {
  @@unique([categoryId, testId])  // ‚úÖ –¢–µ—Å—Ç —Ä–∞–∑ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  @@index([categoryId, order])    // ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ

---

### Collection
```prisma
model Collection {
  @@index([slug])       // ‚úÖ –ü–æ–∏—Å–∫ –ø–æ URL
  @@index([type])       // ‚úÖ –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É (profession/learning_path/custom)
  @@index([targetRole]) // ‚úÖ –§–∏–ª—å—Ç—Ä –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ

---

### CollectionTest (Junction)
```prisma
model CollectionTest {
  @@unique([collectionId, testId])  // ‚úÖ –¢–µ—Å—Ç —Ä–∞–∑ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
  @@index([collectionId, order])    // ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ

---

### UserTestList
```prisma
model UserTestList {
  @@index([userId])  // ‚úÖ –°–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ

---

### UserTestListItem (Junction)
```prisma
model UserTestListItem {
  @@unique([listId, testId])  // ‚úÖ –¢–µ—Å—Ç —Ä–∞–∑ –≤ —Å–ø–∏—Å–∫–µ
  @@index([listId, order])    // ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å–ø–∏—Å–∫–∞
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è Lecture

```prisma
model Lecture {
  id               String  @id @default(cuid())
  title            String
  topic            String
  content          String  @db.Text
  // ... other fields

  @@index([title])  // üëà –î–æ–±–∞–≤–∏—Ç—å
  @@index([topic])  // üëà –î–æ–±–∞–≤–∏—Ç—å
}
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- API endpoint `/api/lectures` –º–æ–∂–µ—Ç –∏—Å–∫–∞—Ç—å –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- –ü–æ–∏—Å–∫ –ª–µ–∫—Ü–∏–π –ø–æ —Ç–µ–º–µ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

---

### 2. üí° –û–ü–¶–ò–û–ù–ê–õ–¨–ù–û: Composite index –¥–ª—è Test

```prisma
model Test {
  // ... existing indexes
  @@index([difficulty, title])  // üëà –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å
}
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –ß–∞—Å—Ç—ã–π –∑–∞–ø—Ä–æ—Å: —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ + –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- Composite index —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –¥–≤—É—Ö –æ—Ç–¥–µ–ª—å–Ω—ã—Ö

---

### 3. üí° –û–ü–¶–ò–û–ù–ê–õ–¨–ù–û: Full-text search –¥–ª—è Question

–ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –ø–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É –≤–æ–ø—Ä–æ—Å–æ–≤:

```prisma
model Question {
  // ... fields

  @@index([question(ops: raw("gin_trgm_ops"))], type: Gin)  // PostgreSQL full-text
}
```

**–¢—Ä–µ–±—É–µ—Ç:** PostgreSQL —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `pg_trgm`

---

## üìã –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

### ARCHITECTURE.md - –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ User –º–æ–¥–µ–ª—å –æ–ø–∏—Å–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Category –∏–µ—Ä–∞—Ä—Ö–∏—è –æ–ø–∏—Å–∞–Ω–∞
- ‚úÖ Test Many-to-Many —Å–≤—è–∑–∏ –æ–ø–∏—Å–∞–Ω—ã
- ‚úÖ Question —Å–≤—è–∑—å —Å Lecture –æ–ø–∏—Å–∞–Ω–∞
- ‚úÖ Junction tables –æ–ø–∏—Å–∞–Ω—ã
- ‚ö†Ô∏è **Lecture –º–æ–¥–µ–ª—å –æ–ø–∏—Å–∞–Ω–∞ –ë–ï–ó —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤**

**–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å –≤ ARCHITECTURE.md:**
- –î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—á–∞–Ω–∏–µ –æ Lecture –∏–Ω–¥–µ–∫—Å–∞—Ö

---

### FEATURE_DEVELOPMENT_GUIDE.md - –ü—Ä–∏–º–µ—Ä—ã —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã Prisma —Å—Ö–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ Junction tables –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö –¥–æ–±–∞–≤–ª–µ–Ω—ã

---

## üéØ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö–†–ò–¢–ò–ß–ù–û
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è Lecture –º–æ–¥–µ–ª–∏
- [ ] –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é: `npx prisma migrate dev --name add_lecture_indexes`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å ARCHITECTURE.md —Å –ø–æ–º–µ—Ç–∫–æ–π –æ Lecture –∏–Ω–¥–µ–∫—Å–∞—Ö

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ
- [ ] –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å composite index –¥–ª—è Test [difficulty, title]
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —Ä–∞–∑–¥–µ–ª "Database Performance"

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å full-text search –¥–ª—è Question (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ slow queries

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ö–µ–º—ã** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –û—Ç–ª–∏—á–Ω–∞—è Many-to-Many –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ |
| **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è** | ‚≠ê‚≠ê‚≠ê‚≠ê | –•–æ—Ä–æ—à–æ, –Ω–æ Lecture –±–µ–∑ –∏–Ω–¥–µ–∫—Å–æ–≤ |
| **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –ü–æ–ª–Ω–∞—è 3NF, –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | ‚≠ê‚≠ê‚≠ê‚≠ê | –ü–æ–¥—Ä–æ–±–Ω–∞—è, –Ω–æ –Ω—É–∂–Ω—ã —É—Ç–æ—á–Ω–µ–Ω–∏—è |
| **Performance** | ‚≠ê‚≠ê‚≠ê‚≠ê | –û–ø—Ç–∏–º–∞–ª—å–Ω–æ, –∫—Ä–æ–º–µ Lecture |

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞: 4.6/5** ‚≠ê‚≠ê‚≠ê‚≠ê

---

## üî• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Ö–æ–¥–∫–∏

### 1. Lecture –º–æ–¥–µ–ª—å –±–µ–∑ –∏–Ω–¥–µ–∫—Å–æ–≤ ‚ö†Ô∏è

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
```prisma
model Lecture {
  id    String @id @default(cuid())
  title String   // ‚ùå –ù–µ—Ç –∏–Ω–¥–µ–∫—Å–∞
  topic String   // ‚ùå –ù–µ—Ç –∏–Ω–¥–µ–∫—Å–∞
}
```

**–í–ª–∏—è–Ω–∏–µ:**
- –ú–µ–¥–ª–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –ª–µ–∫—Ü–∏–π –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ
- FULL TABLE SCAN –ø—Ä–∏ `/api/lectures?search=...`

**–†–µ—à–µ–Ω–∏–µ:**
```prisma
model Lecture {
  id    String @id @default(cuid())
  title String
  topic String

  @@index([title])
  @@index([topic])
}
```

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ

1. **TestResult –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è** - 5 –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
2. **Junction tables** - –≤—Å–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ unique + index
3. **Composite indexes** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –≥–¥–µ –Ω—É–∂–Ω–æ ([userId, completedAt])
4. **Cascade deletes** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã onDelete
5. **ENUM —Ç–∏–ø—ã** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫
6. **Many-to-Many** - —á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

```prisma
// –î–æ–±–∞–≤–∏—Ç—å –≤ prisma/schema.prisma

model Lecture {
  id               String                @id @default(cuid())
  title            String
  topic            String
  content          String                @db.Text
  scenariosContent String?               @db.Text
  exampleContent   String?               @db.Text
  tasksContent     String?               @db.Text
  createdAt        DateTime              @default(now())
  updatedAt        DateTime              @updatedAt
  questions        Question[]
  taskProgress     LectureTaskProgress[]

  @@index([title])  // üëà –î–æ–±–∞–≤–∏—Ç—å
  @@index([topic])  // üëà –î–æ–±–∞–≤–∏—Ç—å
}
```

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
npx prisma migrate dev --name add_lecture_indexes
```

---

**–û—Ç—á—ë—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω:** 2026-01-28
**–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä:** Claude Code
