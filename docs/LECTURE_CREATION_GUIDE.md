# Идеальная инструкция по созданию лекций

Кратко: одна лекция = один тест. Сначала пишем лекцию, потом вопросы. Лекция состоит из четырёх частей: основной текст, сценарии, пример и задания.

## Состав лекции (модель)

- `title` — название лекции
- `topic` — тема/раздел
- `content` — основной текст (вкладка "Лекция")
- `scenariosContent` — сценарии (вкладка "Сценарии", поле опциональное; если пусто — вкладка не показывается)
- `exampleContent` — пример (вкладка "Пример", поле опциональное; если пусто — вкладка не показывается)
- `tasksContent` — задания (вкладка "Задания", поле опциональное; если пусто — вкладка не показывается)

---

## 🎯 Главные правила

### 1) Одна лекция = один тест

- Каждая лекция покрывает вопросы **одного конкретного теста**.
- ❌ Неправильно: глобальная лекция "HTTP методы".
- ✅ Правильно: лекция для теста "HTTP методы: основы" (20 вопросов).

### 2) Полное покрытие вопросов

**Лекция ОБЯЗАТЕЛЬНО должна давать знания для ответов на ВСЕ вопросы теста.**
Теперь вопросы формируются по лекции, поэтому она должна полностью раскрывать тему и все ключевые концепции.

- Каждая ключевая концепция темы детально объяснена.
- Студент после прочтения уверенно отвечает на все вопросы.
- Если студент не может ответить — лекция неполная.
- Лекция покрывает частые вопросы по теме (FAQ-уровень понимания).

**Правило обязательного списка (вариант 2):**
1) Перед написанием составьте список **«Обязательные пункты темы»** (10–25 пунктов): ключевые концепции, частые вопросы, типичные ошибки и **часто используемые элементы/паттерны/теги/операции**.
2) Во время написания ставьте ✅ напротив каждого пункта и указывайте, где он раскрыт (раздел/абзац/пример).
3) Лекция считается готовой **только при 100% покрытии** списка.
4) Если пункт не покрыт — добавьте объяснение или перепишите часть лекции.

### 3) Вопросы создаются по лекции, а не наоборот

**Лекция объясняет концепции, а НЕ копирует вопросы из теста.**

❌ **Неправильно**:

```markdown
Вопрос: Какой код при таймауте gateway?
Ответ: 504 Gateway Timeout
```

✅ **Правильно**:

```markdown
## 504 Gateway Timeout

Когда прокси-сервер не получает ответ от backend вовремя.

**Сценарий**: Nginx → backend (не отвечает 60 сек) → 504

> Разница от 502: 502 = backend недоступен, 504 = медленно отвечает
```

**Принципы**:

- Объясняйте концепцию через примеры, а сценарии выносите в `scenariosContent`.
- Формулировка в лекции отличается от вопроса в тесте.
- Показывайте различия между похожими случаями.

### 4) Понятное объяснение темы

- Лекция объясняет **как**, **почему**, **зачем**, а не просто перечисляет факты.
- Должен быть разбор всех важных вещей по теме: ключевые понятия, различия, последствия, ограничения.
- Аналогии можно использовать в любом разделе, если они реально помогают пониманию.
- Если в тесте есть конкретная формулировка или ситуация, она должна быть разобрана **в контексте лекции**.
- Часто используйте советы (💡), короткие выводы (✅) и уместные эмодзи, чтобы материал выглядел живым и понятным.
- Можно вставлять небольшие примеры кода/фрагментов, если они помогают понять тему, но избегайте громоздких блоков.
- В конце лекции добавляйте короткую мотивирующую фразу.

### 5) Обязательный формат примера

Вкладку "Пример" начинайте строго с этого контекста:

```
Разрабатывается условно такой сайт: платформа онлайн‑курсов.
После всех митингов с бизнесом и постановки задачи нужно было решить проблему:
пользователи терялись в каталоге и не понимали, где они находятся.

Ниже — фрагмент готового документа по навигации и ссылкам.
```

В примере обязательно указывайте:
- **Цель**
- **Требования**
- **Критерии приёмки**

Если тема связана с кодом — добавьте небольшой фрагмент кода (или другой артефакт, который явно показывает суть примера).

### 6) Задания обязательны, если тема практическая

- 7–15 заданий по теме.
- Карточка показывает **только краткое описание** (Ситуация / Что сделать / Критерий).
- Все дополнительные требования и детали — **в описании задания**, не в карточке.
- Если в ответе есть атрибуты (например, `id`, `aria-labelledby`) — **обязательно укажите это в требованиях**.
- **Исходник** даём как код‑блок (чёрный фон), чтобы было видно «как сейчас».
- **Ответ** и **Объяснение** показываются по кнопке "Ответ" в модальном окне.
- Ответ должен объяснять **как выполнить** задачу, а не только показывать итог.
- **Объяснение** — 2–4 предложения: «почему так», «что улучшилось» и «как проверить себя».
- Подробные правила и формат — в `docs/TASK_CREATION_GUIDE.md`.

---

## Структура основного текста (content) — эталон подачи

Ниже — структура, которая повторяет подачу последней лекции и подходит для новых тем.

### 1) Введение (10–15%)

- Простая аналогия из жизни.
- 1–2 предложения, что это за тема и зачем она нужна.
- Короткий вывод.

```markdown
# [Название темы]

## Что такое [тема]?

[Простое объяснение]

### Простая аналогия
[Аналогия из жизни]

💡 Совет: ...
✅ Вывод: ...
```

### 2) Ключевые элементы (50–60%)

Каждый важный элемент раскрывается одинаково, чтобы чтение было лёгким:

```markdown
## N. [Элемент] — [краткий смысл]

**Назначение:** ...
**Аналогия:** ...

**Пример:**
```html
[короткий пример]
```

**Характеристики:**
- ✅ ...
- ✅ ...

**Когда использовать:** ...

✅ Вывод: ...
```

Если блок не требует полного набора, минимум: **Назначение → Пример → Когда использовать → Вывод**.

### 3) Виды, сравнения, таблицы (5–10%)

- Таблица сравнения похожих понятий или вариантов.
- Пример: "внутренние vs внешние ссылки", "а vs button".

### 4) Типичные ошибки (5–10%)

Минимум 5–8 ошибок, связанных с вопросами теста.

```markdown
## Типичные ошибки

### Ошибка 1: [Название]

❌ Неправильно: ...
✅ Правильно: ...
**Почему**: ...
```

### 5) Best Practices (5–10%)

Что делать правильно — короткими списками.

### 6) Заключение (3–5%)

- 2–4 ключевые мысли.
- Мотивирующая фраза в конце.

---

## Сценарии (scenariosContent)

Сценарии — отдельная вкладка, **не внутри основного текста**.

**Требования**:
- 5–15 сценариев в зависимости от частоты ошибок по теме.
- В начале сценариев — короткий раздел **«Типичные ошибки (сводка)»** списком 5–8 пунктов.
- Формат: **Сценарий N** → **Неправильно** → **Правильно** → **Почему**.
- В каждом сценарии обязателен **практический пример**:
  - если тема про код — используйте **"До/После"** с короткими код‑сниппетами;
  - если тема про документы — используйте фрагмент требования/документа.
- Сценарии не дублируют лекцию, а дополняют её практическими кейсами.

```markdown
## Популярные сценарии

### Сценарий 1: [Ситуация]

❌ Неправильно: ...
✅ Правильно: ...

**До:**
```html
...
```

**После:**
```html
...
```

**Почему**: ...

**Практический пример:** [фрагмент требования/документа]
```

---

## Пример (exampleContent)

Пример — отдельная вкладка.

**Обязательная структура**:
- Стартовый контекст (строго по шаблону).
- Раздел с **Целью**, **Требованиями**, **Критериями приёмки**.
- Если тема связана с кодом — короткий фрагмент кода.

```markdown
## Пример: [Название]

Разрабатывается условно такой сайт: платформа онлайн‑курсов.
После всех митингов с бизнесом и постановки задачи нужно было решить проблему:
пользователи терялись в каталоге и не понимали, где они находятся.

Ниже — фрагмент готового документа по навигации и ссылкам.

### Раздел: [Название]

**Цель:** ...

**Требования:**
1) ...
2) ...

**Критерии приёмки:**
- ...

**Фрагмент реализации (если нужно):**
```html
...
```
```

---

## Задания (tasksContent)

Задания — отдельная вкладка.  
Карточка показывает **только краткий блок**, полное описание — по кнопке "Задание", ответ — по кнопке "Ответ".

**Требования**:
- 7–15 заданий в зависимости от глубины темы.
- Каждое задание практическое и по теме (документ, структура, правила, решение).
- **Кратко (карточка):** 3 строки — Ситуация / Что сделать / Критерий. Никаких доп. требований.
- **Описание (детали):** требования, ограничения, нужные атрибуты (`id`, `aria-labelledby` и т.д.).
- **Исходник:** показываем «как сейчас» в код‑блоке (чёрный фон).
- **Ответ:** формат **Было / Стало / Объяснение**. Объяснение описывает шаги и логику.
- Используйте эмодзи для навигации, но не перегружайте.

Полный шаблон — ниже.

---

## Стиль и оформление

✅ **Используем**:

- Простые предложения, активный залог.
- Разговорный тон, обращение "вы".
- Аналогии из реальной жизни.
- Короткие абзацы (4–5 строк максимум).
- Советы (💡) и короткие выводы (✅) после важных блоков.
- Термины выделяем **жирным** и/или `inline`‑кодом.

❌ **Избегаем**:

- Академический язык и длинные абзацы.
- Жаргон без объяснений.
- HTML‑тегов в тексте (например, не используем `<code>` в正文; используем **жирный** или `inline`‑код).

**Эмодзи для навигации**: ✅ правильно | ❌ неправильно | ⚠️ важно | 💡 совет | 🎯 главное

**Форматирование**:

- `# H1` — название лекции.
- `## H2` — разделы.
- `### H3` — подразделы.
- **Жирный** — термины.
- `` `inline` `` — названия тегов, атрибутов, параметров.
- ` ```html ` — короткие блоки кода.
- Используйте `---` для разделения крупных блоков.

---

## Правило перевода английских терминов

✅ **Правильно** (при первом упоминании):

```markdown
**User Story (пользовательская история)** — краткое описание функциональности.
**Acceptance Criteria (критерии приемки)** определяют условия завершения.
**Main Flow (основной сценарий)** описывает happy path (счастливый путь).
```

❌ **Неправильно** (без перевода):

```markdown
User Story — краткое описание функциональности.
Acceptance Criteria определяют условия завершения.
Main Flow описывает happy path.
```

⚠️ **Важно**:

- Перевод в скобках **только при первом упоминании** термина.
- При повторном использовании можно писать без перевода.
- Устоявшиеся термины (API, HTTP, REST) можно без перевода.
- Жаргонные выражения (happy path, scope creep) — обязательно с переводом.

---

## Технический процесс

### 1. Найти тест

```typescript
const test = await prisma.test.findFirst({
  where: { title: "Название теста" },
  include: {
    questions: {
      include: { question: true },
      orderBy: { order: "asc" },
    },
  },
});
```

### 2. Составить карту темы

**Сначала формируем лекцию, потом вопросы — по её содержанию.**

Для подготовки лекции:

- Выпишите все ключевые концепции темы.
- Определите, что должен понять студент (как, почему, зачем).
- Отметьте места, где нужны советы и выводы.

### 3. Написать лекцию

Markdown для `content` по структуре выше + отдельные `scenariosContent`, `exampleContent`, `tasksContent`.

### 4. Создать лекцию в БД, затем вопросы по ней

```typescript
const lecture = await prisma.lecture.create({
  data: {
    title: "Название",
    topic: "Тема",
    content: lectureContent,
    scenariosContent,
    exampleContent,
    tasksContent,
  },
});

for (const questionId of test.questions.map((tq) => tq.questionId)) {
  await prisma.question.update({
    where: { id: questionId },
    data: { lectureId: lecture.id },
  });
}
```

**Важно**: привязываем только к вопросам этого теста.

---

## Контрольный чеклист

### Обязательно

- [ ] Составлена карта темы и перечень ключевых концепций.
- [ ] Лекция даёт знания для ответов на ВСЕ вопросы.
- [ ] Лекция НЕ копирует вопросы из теста буквально.
- [ ] Вопросы создаются по лекции и не добавляют нового материала.
- [ ] Сценарии вынесены в `scenariosContent` и дополняют лекцию.

### Структура

- [ ] Введение с аналогией.
- [ ] Ключевые элементы по схеме "Назначение → Пример → Когда использовать → Вывод".
- [ ] Таблицы сравнения.
- [ ] Типичные ошибки (5–8 штук).
- [ ] Best Practices.
- [ ] Заключение + мотивирующая фраза.
- [ ] Сценарии (5–15 штук) в отдельной вкладке.
- [ ] Пример в отдельной вкладке (если есть что показать).
- [ ] Задания (7–15 штук) в отдельной вкладке.
- [ ] Задания оформлены по `docs/TASK_CREATION_GUIDE.md`.

### Оформление

- [ ] Эмодзи для навигации.
- [ ] Короткие примеры, без громоздких блоков.
- [ ] Объём: по необходимости; можно больше 800 строк, главное — покрытие и читаемость.
- [ ] Привязка только к вопросам этого теста.

---

## Критерий качества

✅ **Хорошая лекция**:

- Студент уверенно отвечает на все вопросы теста после прочтения.
- Понимает "почему" через объяснение концепций.
- Может применить знания на практике.
- Лекция объясняет концепции, а НЕ копирует вопросы.

❌ **Плохая лекция**:

- Студент не может ответить на некоторые вопросы.
- Лекция покрывает тему в общем, но не конкретные концепции.
- Содержит буквальные копии вопросов.

> 💡 **Золотое правило**: если студент не может ответить на вопрос теста после прочтения лекции — лекция требует доработки.

---

## Мини‑пример плохой и хорошей лекции

**Плохо** (список фактов без объяснений):
```
HTTP статус коды:
200 = OK
201 = Created
400 = Bad Request
```

**Хорошо** (объясняет смысл и применение):
```
HTTP статус код — это договор между клиентом и сервером.
401 означает: «проверь аутентификацию», поэтому запрос повторяют с токеном.
403 означает, что токен есть, но прав недостаточно — повтор без изменения прав не поможет.
```

---

## Примеры хороших лекций

### Пример 1: User Stories (Пользовательские истории)

**Тест**: "User Stories: Написание пользовательских историй" (24 вопроса)
**Скрипт**: `scripts/create-user-stories-lecture-v3.ts`

**Что сделано правильно**:

- Простое введение с аналогией.
- Короткие предложения (10–15 слов).
- Практические примеры из жизни.
- 8 детальных сценариев в `scenariosContent`.
- Сравнительные таблицы.
- 5 типичных ошибок.
- Перевод терминов при первом упоминании.

### Пример 2: Use Cases (Сценарии использования)

**Тест**: "Use Cases: Сценарии использования" (24 вопроса)
**Скрипт**: `scripts/create-use-cases-lecture-v2.ts`

**Что сделано правильно**:

- Чёткая структура объяснений.
- Детальные примеры с альтернативами.
- 8 практических сценариев.
- Объяснение сложных терминов через аналогии.
- 100% покрытие вопросов.

### Пример 3: HTML: текст и семантика

**Тест**: "HTML: текст и семантика"
**Скрипт**: `scripts/create-html-text-semantics-lecture.ts`

**Что сделано правильно**:

- Короткие примеры по месту (не громоздкие).
- Чёткое разделение: лекция / сценарии / пример / задания.
- Покрытие частых вопросов.
- Практика с ответами и объяснениями в `tasksContent`.

### Пример 4: HTML: ссылки и навигация

**Тест**: "HTML: ссылки и навигация"
**Скрипт**: `scripts/create-html-links-navigation-lecture.ts`

**Что сделано правильно**:

- Структура блоков: Назначение → Аналогия → Пример → Характеристики → Когда использовать → Вывод.
- Много коротких выводов и советов.
- Сценарии с форматами До/После и практическими требованиями.
- Полный пример с Целью/Требованиями/Критериями приёмки.
- Практические задания с ответом и объяснением.

---

## Ключевые принципы из примеров

### 1) Начинайте с простой аналогии

❌ Плохо: "Use Case — формализованное описание функциональных требований."
✅ Хорошо: "Use Case — как инструкция для банкомата: шаг 1, шаг 2..."

### 2) Используйте таблицы для сравнения

```markdown
| Что    | Вариант 1 | Вариант 2  |
| ------ | --------- | ---------- |
| Размер | 3 строки  | 10 страниц |
```

### 3) Примеры из реальной жизни

✅ Интернет-магазин, банкомат, блог, соцсеть.
✅ Ситуации, с которыми сталкивался каждый.

### 4) Короткие абзацы

❌ Абзац на 15 строк → студент запутается.
✅ Абзац 3–5 строк → легко читать.

### 5) Структура "Проблема → Решение → Вывод"

```markdown
**Ситуация**: Пользователи жалуются...
**Решение**: ...
✅ **Вывод**: ...
```

### 6) Минимум терминов, максимум смысла

❌ "Валидация осуществляется посредством..."
✅ "Система проверяет..."

### 7) Каждый пример должен учить

- Зачем так сделано.
- Что будет, если сделать по-другому.
- Когда использовать этот подход.

---

## Шаблон упрощенной лекции

```markdown
# [Тема]: [Простое название]

## Что такое [тема]?

[Определение простыми словами]

### Простая аналогия
[Аналогия из жизни]

💡 Совет: ...
✅ Вывод: ...

---

## 1. [Элемент] — [смысл]

**Назначение:** ...
**Аналогия:** ...

**Пример:**
```html
...
```

**Характеристики:**
- ✅ ...
- ✅ ...

**Когда использовать:** ...
✅ Вывод: ...

---

## Типичные ошибки

### Ошибка 1: ...
❌ Неправильно: ...
✅ Правильно: ...
**Почему**: ...

---

## Best Practices

- ...
- ...

---

## Заключение

### Ключевые мысли

🎯 ...
🎯 ...

[Мотивирующая фраза]
```

---

## Шаблон сценариев (scenariosContent)

```markdown
## Популярные сценарии

### Сценарий 1: [Название ситуации]

❌ Неправильно: ...
✅ Правильно: ...

**До:**
```html
...
```

**После:**
```html
...
```

**Почему**: ...

**Практический пример:** ...
```

---

## Шаблон заданий (tasksContent)

```markdown
## Задания для практики 🧪

### Задание 1: [Название]
**Кратко:**
Ситуация: ...
Что сделать: ...
Критерий: ...

**Описание:**
🔎 **Ситуация:** ...
✅ **Что сделать:** ...
📌 **Требования:**
- ...
- ...
🎯 **Критерий:** ...

🧱 **Исходник (как сейчас):**
```html
...
```

**Ответ:**
**Было:**
```html
...
```

**Стало:**
```html
...
```

**Объяснение:** 2–4 предложения — почему так, что улучшилось и как проверить себя.
```

---

## Как проверить качество лекции

### 1. Тест на бабушку

Прочитайте лекцию вслух. Если человек без технического образования поймет суть — лекция хорошая.

### 2. Тест на примеры

Каждая концепция должна иметь:

- ✅ Определение (что это).
- ✅ Аналогия (как объяснить ребенку).
- ✅ Пример из жизни (где встречается).
- ✅ Пример применения (код/сценарий).

### 3. Тест на вопросы

После создания вопросов откройте тест. Для каждого вопроса найдите раздел в лекции, который объясняет концепцию.

Если хотя бы 1 вопрос не покрыт → лекция неполная.

### 4. Тест на сложность

Подсчитайте средний размер предложения:

- ✅ 10–15 слов — отлично.
- ⚠️ 15–20 слов — приемлемо.
- ❌ 20+ слов — разбейте на несколько предложений.

### 5. Тест на практичность

Сценарии в `scenariosContent`: 5–15 штук с реальными примерами.
Задания в `tasksContent`: 7–15 задач с понятным результатом, карточка = только краткий блок.

---

## Частые вопросы

### Вопрос: Сколько строк должна быть лекция?

**Ответ**: Жесткого лимита нет. Пишите столько, сколько нужно, чтобы покрыть тему и FAQ. Можно больше 800 строк, но следите за читаемостью.

### Вопрос: Сколько сценариев нужно?

**Ответ**: 5–15, в зависимости от темы и частоты ошибок. Если тест объёмный — ближе к 10–15.

### Вопрос: Что если концепция очень сложная?

**Ответ**: Разбейте на части:

1. Что это (простыми словами).
2. Зачем нужно (практическая выгода).
3. Как работает (пошагово).
4. Пример из жизни.
5. Пример применения (код/сценарий).

### Вопрос: Можно ли использовать технические термины?

**Ответ**: Да, но:

1. При первом упоминании — с переводом.
2. После первого раза — можно без перевода.
3. Если термин сложный — дайте определение.

### Вопрос: Как проверить, что лекция отвечает на все вопросы?

**Ответ**:

1. Экспортируйте все вопросы теста.
2. Для каждого вопроса найдите раздел в лекции.
3. Прочитайте раздел — студент сможет ответить?
4. Если нет — добавьте детали или пример.

---

## Полезные ссылки

- **User Stories лекция**: `scripts/create-user-stories-lecture-v3.ts`
- **Use Cases лекция**: `scripts/create-use-cases-lecture-v2.ts`
- **HTML: ссылки и навигация**: `scripts/create-html-links-navigation-lecture.ts`
- **Чеклист качества**: `LECTURE_CHECKLIST.md`
- **Пример лекции в базе**: `HTTP Статус коды: Успешные запросы (2xx)` — `/api/lectures/cmk5y14b200001cvnc0vimhln`

> 💡 Совет: изучите примеры перед созданием новой лекции. Они показывают правильный уровень простоты и детализации.
