import { PrismaClient } from '@prisma/client';
import { PrismaPg } from '@prisma/adapter-pg';
import { Pool } from 'pg';
import dotenv from 'dotenv';

dotenv.config();

const pool = new Pool({ connectionString: process.env.DATABASE_URL });
const adapter = new PrismaPg(pool);
const prisma = new PrismaClient({ adapter });

const lectureContent = `# HTTP –°—Ç–∞—Ç—É—Å –∫–æ–¥—ã: –£—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (2xx)

## –í–≤–µ–¥–µ–Ω–∏–µ: –ß—Ç–æ —Ç–∞–∫–æ–µ HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥—ã?

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –ø–∏—Å—å–º–æ –ø–æ –ø–æ—á—Ç–µ. –í—ã —Ö–æ—Ç–∏—Ç–µ –∑–Ω–∞—Ç—å: –¥–æ—à–ª–æ –ª–∏ –æ–Ω–æ? –ü–æ–ª—É—á–∞—Ç–µ–ª—å –ø—Ä–æ—á–∏—Ç–∞–ª? –ò–ª–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–¥—Ä–µ—Å –Ω–µ–≤–µ—Ä–Ω—ã–π?

**HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥—ã** ‚Äî —ç—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–∏–µ "—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–æ—Å—Ç–∞–≤–∫–µ" –≤ –º–∏—Ä–µ –≤–µ–±-–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π. –ö–æ–≥–¥–∞ –≤–∞—à –±—Ä–∞—É–∑–µ—Ä –∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç HTTP –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä, —Å–µ—Ä–≤–µ—Ä **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –æ—Ç–≤–µ—á–∞–µ—Ç –æ–¥–Ω–∏–º –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–∏—Å–ª–æ–≤—ã—Ö –∫–æ–¥–æ–≤, —Å–æ–æ–±—â–∞—è –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç–∞—Ç—É—Å –∫–æ–¥–æ–≤

HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥—ã ‚Äî —ç—Ç–æ **—Ç—Ä—ë—Ö–∑–Ω–∞—á–Ω—ã–µ —á–∏—Å–ª–∞** (–æ—Ç 100 –¥–æ 599), —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–µ –Ω–∞ 5 –∫–ª–∞—Å—Å–æ–≤:

| –î–∏–∞–ø–∞–∑–æ–Ω | –ö–ª–∞—Å—Å | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|-------|----------|
| **1xx** | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ | –ó–∞–ø—Ä–æ—Å –ø–æ–ª—É—á–µ–Ω, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è |
| **2xx** | –£—Å–ø–µ—à–Ω—ã–µ | –ó–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω ‚úÖ |
| **3xx** | –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –¢—Ä–µ–±—É—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è |
| **4xx** | –û—à–∏–±–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞ | –û—à–∏–±–∫–∞ –≤ –∑–∞–ø—Ä–æ—Å–µ (–Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–µ—Ç –ø—Ä–∞–≤) |
| **5xx** | –û—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ | –û—à–∏–±–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ |

> üí° **–í–∞–∂–Ω–æ**: –ö–∞–∂–¥—ã–π —Å—Ç–∞—Ç—É—Å –∫–æ–¥ –∏–º–µ–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (reason phrase), –Ω–∞–ø—Ä–∏–º–µ—Ä: \`200 OK\`, \`201 Created\`, \`204 No Content\`.

---

## –î–∏–∞–ø–∞–∑–æ–Ω 2xx: –£—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

–ö–æ–¥—ã **2xx (200-299)** –æ–∑–Ω–∞—á–∞—é—Ç, —á—Ç–æ:
- ‚úÖ –ó–∞–ø—Ä–æ—Å –±—ã–ª **—É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω**
- ‚úÖ –ó–∞–ø—Ä–æ—Å –±—ã–ª **–ø–æ–Ω—è—Ç —Å–µ—Ä–≤–µ—Ä–æ–º**
- ‚úÖ –ó–∞–ø—Ä–æ—Å –±—ã–ª **—É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω**

–í —ç—Ç–æ–π –ª–µ–∫—Ü–∏–∏ –º—ã –¥–µ—Ç–∞–ª—å–Ω–æ —Ä–∞–∑–±–µ—Ä—ë–º –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∞—Ç—É—Å –∫–æ–¥—ã —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

---

## 200 OK ‚Äî –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —É—Å–ø–µ—Ö

### –û–ø–∏—Å–∞–Ω–∏–µ

**200 OK** ‚Äî —Å–∞–º—ã–π —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∫–æ–¥ —É—Å–ø–µ—Ö–∞. –û–Ω –æ–∑–Ω–∞—á–∞–µ—Ç:
> "–í—Å—ë –ø—Ä–æ—à–ª–æ –æ—Ç–ª–∏—á–Ω–æ! –í–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∞—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞."

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- **GET –∑–∞–ø—Ä–æ—Å—ã**: –≤–æ–∑–≤—Ä–∞—Ç –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **PUT –∑–∞–ø—Ä–æ—Å—ã**: —É—Å–ø–µ—à–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞ —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **PATCH –∑–∞–ø—Ä–æ—Å—ã**: —á–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö
- **POST –∑–∞–ø—Ä–æ—Å—ã**: –∫–æ–≥–¥–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞, –Ω–æ **–Ω–æ–≤—ã–π —Ä–µ—Å—É—Ä—Å –Ω–µ —Å–æ–∑–¥–∞–Ω** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–∏—Å–∫, –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, –Ω–µ-CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏)

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

‚úÖ **–î–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞** (–∑–∞ —Ä–µ–¥–∫–∏–º–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º–∏)
‚úÖ **Content-Type –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** (–æ–±—ã—á–Ω–æ \`application/json\`)
‚úÖ **–ú–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å ETag** –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
‚ùå **Location –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω** (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç 201)

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**GET –∑–∞–ø—Ä–æ—Å ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**

\`\`\`http
GET /api/users/123
\`\`\`

**–û—Ç–≤–µ—Ç:**
\`\`\`http
HTTP/1.1 200 OK
Content-Type: application/json
ETag: "v2.0"

{
  "id": 123,
  "name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
  "email": "ivan@example.com"
}
\`\`\`

**POST –∑–∞–ø—Ä–æ—Å ‚Äî –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ (–Ω–µ —Å–æ–∑–¥–∞–Ω–∏–µ!):**

\`\`\`http
POST /api/products/search
Content-Type: application/json

{
  "category": "electronics",
  "minPrice": 1000
}
\`\`\`

**–û—Ç–≤–µ—Ç:**
\`\`\`http
HTTP/1.1 200 OK
Content-Type: application/json

{
  "results": [
    { "id": 1, "name": "Laptop", "price": 50000 },
    { "id": 2, "name": "Phone", "price": 30000 }
  ],
  "total": 2
}
\`\`\`

**PUT –∑–∞–ø—Ä–æ—Å ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è:**

\`\`\`http
PUT /api/users/123
Content-Type: application/json

{
  "name": "–ò–≤–∞–Ω –°–∏–¥–æ—Ä–æ–≤",
  "email": "ivan@example.com"
}
\`\`\`

**–û—Ç–≤–µ—Ç:**
\`\`\`http
HTTP/1.1 200 OK
Content-Type: application/json

{
  "id": 123,
  "name": "–ò–≤–∞–Ω –°–∏–¥–æ—Ä–æ–≤",
  "email": "ivan@example.com",
  "updatedAt": "2024-01-15T10:30:00Z"
}
\`\`\`

> ü§î **–ê –µ—Å–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ –ø—Ä–∏–≤–µ–ª–æ –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º?** –í—Å—ë —Ä–∞–≤–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º **200 OK** —Å —Ç–µ–∫—É—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –ö–æ–¥ 304 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è (If-Modified-Since).

---

## 201 Created ‚Äî –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞

### –û–ø–∏—Å–∞–Ω–∏–µ

**201 Created** —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏:
> "–Ø —É—Å–ø–µ—à–Ω–æ **—Å–æ–∑–¥–∞–ª –Ω–æ–≤—ã–π —Ä–µ—Å—É—Ä—Å**. –í–æ—Ç –æ–Ω, –ø–æ —ç—Ç–æ–º—É –∞–¥—Ä–µ—Å—É!"

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- **POST –∑–∞–ø—Ä–æ—Å—ã**: —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ç–æ–≤–∞—Ä–∞, –∑–∞–∫–∞–∑–∞, –ø–æ—Å—Ç–∞ –∏ —Ç.–¥.
- **PUT –∑–∞–ø—Ä–æ—Å—ã**: –µ—Å–ª–∏ —Ä–µ—Å—É—Ä—Å –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª –∏ –±—ã–ª —Å–æ–∑–¥–∞–Ω (—Ä–µ–¥–∫–æ)

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

‚úÖ **–î–û–õ–ñ–ï–ù —Å–æ–¥–µ—Ä–∂–∞—Ç—å Location –∑–∞–≥–æ–ª–æ–≤–æ–∫** (RFC —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç)
‚úÖ **–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ**, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è (–≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å)
‚úÖ **Content-Type –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–ª–æ
‚úÖ **–ú–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å ETag** —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞

\`\`\`http
HTTP/1.1 201 Created
Location: /api/users/456
Content-Type: application/json
ETag: "v1.0"

{
  "id": 456,
  "name": "–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
  "createdAt": "2024-01-15T10:30:00Z"
}
\`\`\`

### –ü—Ä–∏–º–µ—Ä—ã

**–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**

\`\`\`http
POST /api/users
Content-Type: application/json

{
  "name": "–ê–ª–µ–∫—Å–µ–π –°–º–∏—Ä–Ω–æ–≤",
  "email": "alex@example.com"
}
\`\`\`

**–û—Ç–≤–µ—Ç:**
\`\`\`http
HTTP/1.1 201 Created
Location: /api/users/789
Content-Type: application/json

{
  "id": 789,
  "name": "–ê–ª–µ–∫—Å–µ–π –°–º–∏—Ä–Ω–æ–≤",
  "email": "alex@example.com",
  "createdAt": "2024-01-15T10:35:00Z"
}
\`\`\`

**–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞:**

\`\`\`http
POST /api/orders
Content-Type: application/json

{
  "items": [{"productId": 1, "quantity": 2}],
  "userId": 123
}
\`\`\`

**–û—Ç–≤–µ—Ç:**
\`\`\`http
HTTP/1.1 201 Created
Location: /api/orders/555
Content-Type: application/json

{
  "id": 555,
  "status": "pending",
  "total": 100000,
  "createdAt": "2024-01-15T10:40:00Z"
}
\`\`\`

### –ú–æ–∂–Ω–æ –ª–∏ 201 –±–µ–∑ Location?

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ ‚Äî –¥–∞**, –Ω–æ **–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**. –ò—Å–∫–ª—é—á–µ–Ω–∏—è:
- ID –Ω–æ–≤–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞ —É–∂–µ –µ—Å—Ç—å –≤ —Ç–µ–ª–µ –æ—Ç–≤–µ—Ç–∞
- Batch-–æ–ø–µ—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–ª–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–µ—Å—É—Ä—Å–æ–≤
- –°–∏—Å—Ç–µ–º–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä—è–º—ã–µ URL –¥–ª—è —Ä–µ—Å—É—Ä—Å–æ–≤

> ‚ö†Ô∏è **Best Practice**: –í—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–∞–π—Ç–µ **Location** –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞!

---

## 202 Accepted ‚Äî –ó–∞–ø—Ä–æ—Å –ø—Ä–∏–Ω—è—Ç –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ

### –û–ø–∏—Å–∞–Ω–∏–µ

**202 Accepted** –æ–∑–Ω–∞—á–∞–µ—Ç:
> "–Ø –ø—Ä–∏–Ω—è–ª –≤–∞—à –∑–∞–ø—Ä–æ—Å –∏ –Ω–∞—á–∞–ª –µ–≥–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –Ω–æ –µ—â—ë –Ω–µ –∑–∞–∫–æ–Ω—á–∏–ª. –ó–∞–π–¥–∏—Ç–µ –ø–æ–∑–∂–µ!"

### –ê–Ω–∞–ª–æ–≥–∏—è

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã –ø—Ä–∏—à–ª–∏ –≤ –±–∞–Ω–∫ –æ—Ñ–æ—Ä–º–∏—Ç—å –∏–ø–æ—Ç–µ–∫—É. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –≥–æ–≤–æ—Ä–∏—Ç:
- ‚ùå –ù–ï: "–ò–ø–æ—Ç–µ–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞!" (—ç—Ç–æ –±—ã–ª–æ –±—ã 200 OK)
- ‚úÖ –î–ê: "–í–∞—à–∞ –∑–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –¥–Ω–µ–π" (—ç—Ç–æ 202 Accepted)

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–π–º—ë—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- **–§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏**: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤, —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∏–¥–µ–æ
- **Batch-–æ–ø–µ—Ä–∞—Ü–∏–∏**: –º–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- **–û—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á**: –∑–∞–¥–∞—á–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –æ—á–µ—Ä–µ–¥—å

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

‚úÖ **–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** ‚Äî —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å—Ç–∞—Ç—É—Å–µ
‚úÖ **–î–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ—Å–æ–± –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞** (URL –∏–ª–∏ ID –∑–∞–¥–∞—á–∏)
‚ùå **–ù–ï –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É—Å–ø–µ—Ö** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –æ—à–∏–±–∫–æ–π

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞

\`\`\`http
HTTP/1.1 202 Accepted
Content-Type: application/json

{
  "taskId": "task-123-abc",
  "status": "processing",
  "statusUrl": "/api/tasks/task-123-abc",
  "estimatedTime": 300
}
\`\`\`

### –ü—Ä–∏–º–µ—Ä—ã

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞:**

\`\`\`http
POST /api/reports/generate
Content-Type: application/json

{
  "type": "sales",
  "period": "2024-Q1"
}
\`\`\`

**–û—Ç–≤–µ—Ç:**
\`\`\`http
HTTP/1.1 202 Accepted
Content-Type: application/json

{
  "reportId": "report-456",
  "status": "processing",
  "checkUrl": "/api/reports/report-456/status",
  "message": "–û—Ç—á—ë—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è, —ç—Ç–æ –∑–∞–π–º—ë—Ç –æ–∫–æ–ª–æ 2 –º–∏–Ω—É—Ç"
}
\`\`\`

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:**

\`\`\`http
GET /api/reports/report-456/status
\`\`\`

**–û—Ç–≤–µ—Ç (–µ—â—ë –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è):**
\`\`\`http
HTTP/1.1 200 OK
Content-Type: application/json

{
  "status": "processing",
  "progress": 45
}
\`\`\`

**–û—Ç–≤–µ—Ç (–≥–æ—Ç–æ–≤):**
\`\`\`http
HTTP/1.1 200 OK
Content-Type: application/json

{
  "status": "completed",
  "downloadUrl": "/api/reports/report-456/download"
}
\`\`\`

**–ú–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ email:**

\`\`\`http
POST /api/emails/send-bulk
Content-Type: application/json

{
  "recipients": [...500 –∞–¥—Ä–µ—Å–æ–≤...],
  "subject": "–†–∞—Å—Å—ã–ª–∫–∞",
  "body": "..."
}
\`\`\`

**–û—Ç–≤–µ—Ç:**
\`\`\`http
HTTP/1.1 202 Accepted
Content-Type: application/json

{
  "batchId": "batch-789",
  "totalRecipients": 500,
  "statusUrl": "/api/emails/batch-789"
}
\`\`\`

---

## 204 No Content ‚Äî –£—Å–ø–µ—Ö –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö

### –û–ø–∏—Å–∞–Ω–∏–µ

**204 No Content** –æ–∑–Ω–∞—á–∞–µ—Ç:
> "–û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ, –Ω–æ –º–Ω–µ –Ω–µ—á–µ–≥–æ –≤–∞–º –≤–µ—Ä–Ω—É—Ç—å –≤ –æ—Ç–≤–µ—Ç–µ."

### –ö–ª—é—á–µ–≤–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å

‚ùó **–ù–ò–ö–ê–ö–û–ì–û —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞!** –î–∞–∂–µ –ø—É—Å—Ç–æ–≥–æ JSON \`{}\` –±—ã—Ç—å –Ω–µ –¥–æ–ª–∂–Ω–æ.

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- **DELETE –∑–∞–ø—Ä–æ—Å—ã**: —Ä–µ—Å—É—Ä—Å —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª—ë–Ω
- **PUT/PATCH –∑–∞–ø—Ä–æ—Å—ã**: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ, –Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–µ –Ω—É–∂–Ω–æ
- **POST –∑–∞–ø—Ä–æ—Å—ã**: –æ–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è (—Ä–µ–¥–∫–æ)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞

\`\`\`http
HTTP/1.1 204 No Content
\`\`\`

**–í—Å—ë!** –ù–∏–∫–∞–∫–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ \`Content-Type\`, –Ω–∏–∫–∞–∫–æ–≥–æ —Ç–µ–ª–∞.

### –ü—Ä–∏–º–µ—Ä—ã

**–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**

\`\`\`http
DELETE /api/users/123
\`\`\`

**–û—Ç–≤–µ—Ç:**
\`\`\`http
HTTP/1.1 204 No Content
\`\`\`

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö:**

\`\`\`http
PATCH /api/users/123/settings
Content-Type: application/json

{
  "theme": "dark"
}
\`\`\`

**–û—Ç–≤–µ—Ç:**
\`\`\`http
HTTP/1.1 204 No Content
\`\`\`

**–õ–æ–≥–∞—É—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**

\`\`\`http
POST /api/auth/logout
\`\`\`

**–û—Ç–≤–µ—Ç:**
\`\`\`http
HTTP/1.1 204 No Content
\`\`\`

### 200 OK vs 204 No Content

| –ö—Ä–∏—Ç–µ—Ä–∏–π | 200 OK | 204 No Content |
|----------|--------|----------------|
| –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ | –î–æ–ª–∂–Ω–æ –±—ã—Ç—å | –ù–ï–¢ —Ç–µ–ª–∞ |
| Content-Type | –û–±—è–∑–∞—Ç–µ–ª–µ–Ω | –ù–ï–¢ |
| DELETE | –ú–æ–∂–Ω–æ, –µ—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–±–æ—Ä |
| –≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ | –ù–µ—Ç | –î–∞ |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **204** –¥–ª—è DELETE –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, –≥–¥–µ –∫–ª–∏–µ–Ω—Ç—É –Ω–µ –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **200** –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –≤–µ—Ä–Ω—É—Ç—å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å –∏–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —É–¥–∞–ª–µ–Ω–∏—è

---

## 206 Partial Content ‚Äî –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ

### –û–ø–∏—Å–∞–Ω–∏–µ

**206 Partial Content** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è **–≤–æ–∑–≤—Ä–∞—Ç–∞ —á–∞—Å—Ç–∏** –±–æ–ª—å—à–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞.

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- **Range –∑–∞–ø—Ä–æ—Å—ã**: —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –ø–æ —á–∞—Å—Ç—è–º
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤**: –≤–∏–¥–µ–æ, –∞—É–¥–∏–æ, –±–æ–ª—å—à–∏–µ JSON
- **–î–æ–∫–∞—á–∫–∞ —Ñ–∞–π–ª–æ–≤**: –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ—Ä–≤–∞–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

### –ü—Ä–∏–º–µ—Ä: –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ —á–∞—Å—Ç—è–º–∏

**–ó–∞–ø—Ä–æ—Å:**
\`\`\`http
GET /api/videos/movie.mp4
Range: bytes=0-1023
\`\`\`

**–û—Ç–≤–µ—Ç:**
\`\`\`http
HTTP/1.1 206 Partial Content
Content-Type: video/mp4
Content-Range: bytes 0-1023/5242880
Content-Length: 1024

[–ø–µ—Ä–≤—ã–µ 1024 –±–∞–π—Ç–∞ –≤–∏–¥–µ–æ]
\`\`\`

> üí° –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ **Content-Range**, –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∫–∞—è —á–∞—Å—Ç—å –∏–∑ –æ–±—â–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞.

---

## 207 Multi-Status ‚Äî –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã

### –û–ø–∏—Å–∞–Ω–∏–µ

**207 Multi-Status** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–≥–¥–∞ **–æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ—Å—É—Ä—Å–æ–≤**, –∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω—É–∂–µ–Ω —Å–≤–æ–π —Å—Ç–∞—Ç—É—Å.

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- **Batch –æ–ø–µ—Ä–∞—Ü–∏–∏**: –º–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ
- **WebDAV**: —Ä–∞–±–æ—Ç–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
- **–ß–∞—Å—Ç–∏—á–Ω—ã–π —É—Å–ø–µ—Ö**: —á–∞—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π —É—Å–ø–µ—à–Ω–∞, —á–∞—Å—Ç—å —Å –æ—à–∏–±–∫–∞–º–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞

\`\`\`http
HTTP/1.1 207 Multi-Status
Content-Type: application/json

{
  "results": [
    {
      "id": "user-1",
      "status": 200,
      "message": "Updated successfully"
    },
    {
      "id": "user-2",
      "status": 404,
      "message": "User not found"
    },
    {
      "id": "user-3",
      "status": 200,
      "message": "Updated successfully"
    }
  ]
}
\`\`\`

### –ü—Ä–∏–º–µ—Ä: –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ

**–ó–∞–ø—Ä–æ—Å:**
\`\`\`http
DELETE /api/users/batch
Content-Type: application/json

{
  "ids": [1, 2, 3, 999]
}
\`\`\`

**–û—Ç–≤–µ—Ç:**
\`\`\`http
HTTP/1.1 207 Multi-Status
Content-Type: application/json

{
  "results": [
    { "id": 1, "status": 204, "message": "Deleted" },
    { "id": 2, "status": 204, "message": "Deleted" },
    { "id": 3, "status": 204, "message": "Deleted" },
    { "id": 999, "status": 404, "message": "Not found" }
  ],
  "summary": {
    "total": 4,
    "success": 3,
    "failed": 1
  }
}
\`\`\`

### –ü—Ä–∏–º–µ—Ä: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

**–ó–∞–ø—Ä–æ—Å:**
\`\`\`http
POST /api/products/batch
Content-Type: application/json

{
  "products": [
    { "name": "Product A", "price": 100 },
    { "name": "Product B", "price": -50 },
    { "name": "Product C", "price": 200 }
  ]
}
\`\`\`

**–û—Ç–≤–µ—Ç:**
\`\`\`http
HTTP/1.1 207 Multi-Status
Content-Type: application/json

{
  "results": [
    { "status": 201, "id": 10, "message": "Created" },
    { "status": 400, "message": "Invalid price" },
    { "status": 201, "id": 11, "message": "Created" }
  ]
}
\`\`\`

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã 207

–î–ª—è **–ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å–ø–µ—à–Ω—ã—Ö** batch-–æ–ø–µ—Ä–∞—Ü–∏–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- **200 OK** —Å –º–∞—Å—Å–∏–≤–æ–º —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- **201 Created** –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è (–µ—Å–ª–∏ –≤—Å–µ —É—Å–ø–µ—à–Ω—ã)

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ 207** —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ **–µ—Å—Ç—å —Ä–∞–∑–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤!

---

## 226 IM Used ‚Äî Delta Encoding –ø—Ä–∏–º–µ–Ω–µ–Ω–æ

### –û–ø–∏—Å–∞–Ω–∏–µ

**226 IM Used** (Instance Manipulation Used) ‚Äî —Ä–µ–¥–∫–∏–π –∫–æ–¥, –æ–∑–Ω–∞—á–∞—é—â–∏–π —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–º–µ–Ω–∏–ª **delta encoding** (–æ—Ç–ø—Ä–∞–≤–∏–ª —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è).

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

- **Delta encoding**: –∫–ª–∏–µ–Ω—Ç –∑–∞–ø—Ä–æ—Å–∏–ª —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞**: –ø–µ—Ä–µ–¥–∞—á–∞ —Ç–æ–ª—å–∫–æ diff –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞
- **A-IM –∑–∞–≥–æ–ª–æ–≤–æ–∫**: –∫–ª–∏–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç instance manipulations

### –ü—Ä–∏–º–µ—Ä

**–ó–∞–ø—Ä–æ—Å:**
\`\`\`http
GET /api/documents/123
A-IM: vcdiff
If-None-Match: "v1.0"
\`\`\`

**–û—Ç–≤–µ—Ç:**
\`\`\`http
HTTP/1.1 226 IM Used
IM: vcdiff
ETag: "v2.0"
Content-Type: application/vcdiff

[—Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç v1.0 –∫ v2.0]
\`\`\`

> ü§î **–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ**: –≠—Ç–æ—Ç –∫–æ–¥ –∫—Ä–∞–π–Ω–µ —Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –ø–∞–≥–∏–Ω–∞—Ü–∏—é –∏–ª–∏ –ø–æ–ª–Ω—É—é –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö.

---

## –í–∞–∂–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è 2xx —Å—Ç–∞—Ç—É—Å–æ–≤

### Location ‚Äî –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ä–µ—Å—É—Ä—Å

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å**: 201 Created

\`\`\`http
HTTP/1.1 201 Created
Location: /api/users/456
\`\`\`

**–ó–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª–Ω—ã–π –∏–ª–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π URL —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞.

**–ü—Ä–∞–≤–∏–ª–∞**:
- ‚úÖ –î–û–õ–ñ–ï–ù –±—ã—Ç—å –ø—Ä–∏ 201 Created (RFC —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è)
- ‚ùå –ù–ï –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –¥—Ä—É–≥–∏—Ö 2xx –∫–æ–¥–æ–≤
- ‚úÖ –ú–æ–∂–µ—Ç –±—ã—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–º: \`https://api.example.com/users/456\`
- ‚úÖ –ú–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º: \`/api/users/456\`

### Content-Type ‚Äî —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å**: –≤—Å–µ–º–∏ –∫–æ–¥–∞–º–∏ —Å —Ç–µ–ª–æ–º –æ—Ç–≤–µ—Ç–∞ (200, 201, 202, 207)

\`\`\`http
Content-Type: application/json
Content-Type: application/xml
Content-Type: text/plain
\`\`\`

**–ü—Ä–∞–≤–∏–ª–∞**:
- ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–ï–ù –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞
- ‚ùå –ù–ï —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ 204 No Content
- ‚úÖ –î–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É –¥–∞–Ω–Ω—ã—Ö

### ETag ‚Äî –≤–µ—Ä—Å–∏—è —Ä–µ—Å—É—Ä—Å–∞ –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å**: 200 OK, 201 Created

\`\`\`http
ETag: "v2.0"
ETag: "686897696a7c876b7e"
\`\`\`

**–ó–Ω–∞—á–µ–Ω–∏–µ**: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —Ä–µ—Å—É—Ä—Å–∞.

**–ó–∞—á–µ–º –Ω—É–∂–µ–Ω**:
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ: –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å "–Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –ª–∏?"
- –£—Å–ª–æ–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã: \`If-None-Match\` –≤ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—Ä–æ—Å–µ
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤: \`If-Match\` –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏ 201 Created –¥–ª—è –∫–µ—à–∏—Ä—É–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ –ø—Ä–∏ 200 OK –¥–ª—è GET –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞

### Content-Range ‚Äî –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞–Ω–Ω—ã—Ö

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å**: 206 Partial Content

\`\`\`http
Content-Range: bytes 0-1023/5242880
\`\`\`

**–§–æ—Ä–º–∞—Ç**: \`–µ–¥–∏–Ω–∏—Ü—ã –Ω–∞—á–∞–ª–æ-–∫–æ–Ω–µ—Ü/–æ–±—â–∏–π_—Ä–∞–∑–º–µ—Ä\`

---

## –†–µ—à–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á

### –ó–∞–¥–∞—á–∞ 1: –ß—Ç–æ –≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º GET?

**–û—Ç–≤–µ—Ç**: **200 OK** —Å –¥–∞–Ω–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞.

\`\`\`http
GET /api/users/123

‚Üí 200 OK
{
  "id": 123,
  "name": "–ò–≤–∞–Ω"
}
\`\`\`

### –ó–∞–¥–∞—á–∞ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞ POST ‚Äî –∫–∞–∫–æ–π –∫–æ–¥?

**–û—Ç–≤–µ—Ç**: **201 Created** —Å Location –∏ —Ç–µ–ª–æ–º (—Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å).

\`\`\`http
POST /api/users

‚Üí 201 Created
Location: /api/users/456
{
  "id": 456,
  "name": "–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
}
\`\`\`

### –ó–∞–¥–∞—á–∞ 3: –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞ ‚Äî 200 –∏–ª–∏ 204?

**–û—Ç–≤–µ—Ç**:
- **204 No Content** –µ—Å–ª–∏ –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç)
- **200 OK** –µ—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É–¥–∞–ª–µ–Ω–∏–∏

\`\`\`http
DELETE /api/users/123

‚Üí 204 No Content
(–±–µ–∑ —Ç–µ–ª–∞)
\`\`\`

### –ó–∞–¥–∞—á–∞ 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ PATCH ‚Äî 200 –∏–ª–∏ 204?

**–û—Ç–≤–µ—Ç**:
- **200 OK** –µ—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **204 No Content** –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º

\`\`\`http
PATCH /api/users/123
{ "name": "–ù–æ–≤–æ–µ –∏–º—è" }

‚Üí 200 OK
{
  "id": 123,
  "name": "–ù–æ–≤–æ–µ –∏–º—è",
  "updatedAt": "..."
}
\`\`\`

### –ó–∞–¥–∞—á–∞ 5: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è ‚Äî –∫–∞–∫–æ–π –∫–æ–¥?

**–û—Ç–≤–µ—Ç**: **202 Accepted** —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å—Ç–∞—Ç—É—Å–µ –∑–∞–¥–∞—á–∏.

\`\`\`http
POST /api/reports/generate

‚Üí 202 Accepted
{
  "taskId": "task-123",
  "statusUrl": "/api/tasks/task-123"
}
\`\`\`

### –ó–∞–¥–∞—á–∞ 6: Batch —É–¥–∞–ª–µ–Ω–∏–µ ‚Äî —á—Ç–æ –≤–µ—Ä–Ω—É—Ç—å?

**–û—Ç–≤–µ—Ç**: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:
- **–í—Å–µ —É—Å–ø–µ—à–Ω—ã**: 200 OK –∏–ª–∏ 204 No Content
- **–ß–∞—Å—Ç–∏—á–Ω—ã–π —É—Å–ø–µ—Ö**: 207 Multi-Status

\`\`\`http
DELETE /api/users/batch
{ "ids": [1, 2, 999] }

‚Üí 207 Multi-Status
{
  "results": [
    { "id": 1, "status": 204 },
    { "id": 2, "status": 204 },
    { "id": 999, "status": 404 }
  ]
}
\`\`\`

### –ó–∞–¥–∞—á–∞ 7: POST –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞ ‚Äî –∫–∞–∫–æ–π –∫–æ–¥?

**–û—Ç–≤–µ—Ç**: **200 OK** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø–æ–∏—Å–∫–∞, –≤—ã—á–∏—Å–ª–µ–Ω–∏–π, –Ω–µ-CRUD –æ–ø–µ—Ä–∞—Ü–∏–π).

\`\`\`http
POST /api/calculate
{ "expression": "2+2" }

‚Üí 200 OK
{
  "result": 4
}
\`\`\`

### –ó–∞–¥–∞—á–∞ 8: –ù—É–∂–µ–Ω –ª–∏ Location –ø—Ä–∏ 200 OK?

**–û—Ç–≤–µ—Ç**: **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ**. Location –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è 201 Created.

### –ó–∞–¥–∞—á–∞ 9: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚Äî –∫–∞–∫–æ–π –∫–æ–¥?

**–û—Ç–≤–µ—Ç**: **200 OK** —Å —Ç–µ–∫—É—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

> ‚ö†Ô∏è –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ 304 Not Modified ‚Äî —ç—Ç–æ –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è (If-Modified-Since), –∞ –Ω–µ –¥–ª—è "–¥–∞–Ω–Ω—ã–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å".

### –ó–∞–¥–∞—á–∞ 10: Batch —Å–æ–∑–¥–∞–Ω–∏–µ ‚Äî 200, 201 –∏–ª–∏ 207?

**–û—Ç–≤–µ—Ç**:
- **–í—Å–µ —Å–æ–∑–¥–∞–Ω—ã**: 200 OK –∏–ª–∏ 201 Created (–º–Ω–µ–Ω–∏—è —Ä–∞–∑–Ω—è—Ç—Å—è)
- **–ß–∞—Å—Ç–∏—á–Ω—ã–π —É—Å–ø–µ—Ö**: 207 Multi-Status

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **200 OK** –¥–ª—è batch-–æ–ø–µ—Ä–∞—Ü–∏–π, –¥–∞–∂–µ –µ—Å–ª–∏ –≤—Å–µ —Å–æ–∑–¥–∞–Ω—ã, —Ç–∞–∫ –∫–∞–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –º–∞—Å—Å–∏–≤, –∞ –Ω–µ –æ–¥–∏–Ω–æ—á–Ω—ã–π —Ä–µ—Å—É—Ä—Å.

---

## –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å—Ç–∞—Ç—É—Å –∫–æ–¥–æ–≤ 2xx

| –ö–æ–¥ | –ù–∞–∑–≤–∞–Ω–∏–µ | –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ | Location | Content-Type | –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
|-----|----------|-------------|----------|--------------|---------------------|
| **200** | OK | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | ‚ö™ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª–µ–Ω | GET, PUT, PATCH, POST (–Ω–µ —Å–æ–∑–¥–∞–Ω–∏–µ) |
| **201** | Created | ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª–µ–Ω | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª–µ–Ω | POST, PUT (—Å–æ–∑–¥–∞–Ω–∏–µ) |
| **202** | Accepted | ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è | ‚ö™ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª–µ–Ω | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ |
| **204** | No Content | ‚ùå –ù–ï–¢ | ‚ùå –ù–ï–¢ | ‚ùå –ù–ï–¢ | DELETE, PATCH (–±–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–∞) |
| **206** | Partial Content | ‚úÖ –ß–∞—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | ‚ùå –ù–ï–¢ | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª–µ–Ω | Range –∑–∞–ø—Ä–æ—Å—ã, –¥–æ–∫–∞—á–∫–∞ |
| **207** | Multi-Status | ‚úÖ –ú–∞—Å—Å–∏–≤ —Å—Ç–∞—Ç—É—Å–æ–≤ | ‚ö™ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª–µ–Ω | Batch –æ–ø–µ—Ä–∞—Ü–∏–∏ |
| **226** | IM Used | ‚úÖ Delta | ‚ùå –ù–ï–¢ | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª–µ–Ω | Delta encoding (—Ä–µ–¥–∫–æ) |

---

## Best Practices ‚Äî –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏

‚ùå **–ü–ª–æ—Ö–æ**:
\`\`\`http
POST /api/users
‚Üí 200 OK  // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 201
\`\`\`

‚úÖ **–•–æ—Ä–æ—à–æ**:
\`\`\`http
POST /api/users
‚Üí 201 Created
Location: /api/users/456
\`\`\`

### 2. –í—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–∞–π—Ç–µ Location –ø—Ä–∏ 201

‚ùå **–ü–ª–æ—Ö–æ**:
\`\`\`http
HTTP/1.1 201 Created
Content-Type: application/json

{ "id": 456 }
\`\`\`

‚úÖ **–•–æ—Ä–æ—à–æ**:
\`\`\`http
HTTP/1.1 201 Created
Location: /api/users/456
Content-Type: application/json

{ "id": 456, "name": "..." }
\`\`\`

### 3. –ù–µ –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ —Ç–µ–ª–æ –ø—Ä–∏ 204

‚ùå **–ü–ª–æ—Ö–æ**:
\`\`\`http
HTTP/1.1 204 No Content
Content-Type: application/json

{}
\`\`\`

‚úÖ **–•–æ—Ä–æ—à–æ**:
\`\`\`http
HTTP/1.1 204 No Content
\`\`\`

### 4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ 207 –¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ —É—Å–ø–µ—Ö–∞

‚ùå **–ü–ª–æ—Ö–æ** (—Å–∫—Ä—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏):
\`\`\`http
DELETE /api/users/batch
‚Üí 200 OK
{ "deleted": 3 }  // –ê —á—Ç–æ —Å 4-–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º?
\`\`\`

‚úÖ **–•–æ—Ä–æ—à–æ**:
\`\`\`http
DELETE /api/users/batch
‚Üí 207 Multi-Status
{
  "results": [
    { "id": 1, "status": 204 },
    { "id": 2, "status": 404, "error": "Not found" }
  ]
}
\`\`\`

### 5. –î–æ–±–∞–≤–ª—è–π—Ç–µ ETag –¥–ª—è –∫–µ—à–∏—Ä—É–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

‚úÖ **–•–æ—Ä–æ—à–æ**:
\`\`\`http
GET /api/users/123
‚Üí 200 OK
ETag: "v2.0"

{ "id": 123, "name": "..." }
\`\`\`

–ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—Ä–æ—Å–µ:
\`\`\`http
GET /api/users/123
If-None-Match: "v2.0"

‚Üí 304 Not Modified (–µ—Å–ª–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å)
\`\`\`

### 6. –î–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ —Å–ø–æ—Å–æ–± –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞

‚ùå **–ü–ª–æ—Ö–æ**:
\`\`\`http
POST /api/reports/generate
‚Üí 202 Accepted
{ "message": "Processing..." }
\`\`\`

‚úÖ **–•–æ—Ä–æ—à–æ**:
\`\`\`http
POST /api/reports/generate
‚Üí 202 Accepted
{
  "taskId": "task-123",
  "statusUrl": "/api/tasks/task-123",
  "estimatedTime": 120
}
\`\`\`

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–°—Ç–∞—Ç—É—Å –∫–æ–¥—ã 2xx** ‚Äî —ç—Ç–æ –≤–∞—à —Å–ø–æ—Å–æ–± —Å–æ–æ–±—â–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É: "–í—Å—ë –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ!". –ù–æ –¥–µ—Ç–∞–ª–∏ –∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏–µ:

- **200 OK** ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —É—Å–ø–µ—Ö —Å –¥–∞–Ω–Ω—ã–º–∏
- **201 Created** ‚Äî —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞ (+ Location!)
- **202 Accepted** ‚Äî –ø—Ä–∏–Ω—è—Ç–æ –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–∑–∂–µ)
- **204 No Content** ‚Äî —É—Å–ø–µ—Ö –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö (–Ω–∏–∫–∞–∫–æ–≥–æ —Ç–µ–ª–∞!)
- **207 Multi-Status** ‚Äî —Ä–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è batch-–æ–ø–µ—Ä–∞—Ü–∏–π

**–ó–∞–ø–æ–º–Ω–∏—Ç–µ –≥–ª–∞–≤–Ω–æ–µ**:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π** –∫–æ–¥ –¥–ª—è –∫–∞–∂–¥–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏
2. **Location** –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–µ—Å—É—Ä—Å–∞
3. **204** –æ–∑–Ω–∞—á–∞–µ—Ç –ù–ò–ö–ê–ö–û–ì–û —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞
4. **207** –¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ —É—Å–ø–µ—Ö–∞ batch-–æ–ø–µ—Ä–∞—Ü–∏–π
5. **ETag** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å –∫–æ–¥–æ–≤ –¥–µ–ª–∞–µ—Ç –≤–∞—à API **–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º**, **–ø–æ–Ω—è—Ç–Ω—ã–º** –∏ **—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º HTTP**.
`;

async function createLecture() {
  try {
    console.log('üéì –°–æ–∑–¥–∞–Ω–∏–µ –ª–µ–∫—Ü–∏–∏ –ø–æ —Å—Ç–∞—Ç—É—Å –∫–æ–¥–∞–º...\n');

    // –ù–∞—Ö–æ–¥–∏–º —Ç–µ—Å—Ç
    const test = await prisma.test.findFirst({
      where: {
        title: '–°—Ç–∞—Ç—É—Å –∫–æ–¥—ã: —É—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã',
      },
      include: {
        questions: {
          include: {
            question: true,
          },
          orderBy: {
            order: 'asc',
          },
        },
      },
    });

    if (!test) {
      console.error('‚ùå –¢–µ—Å—Ç "–°—Ç–∞—Ç—É—Å –∫–æ–¥—ã: —É—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã" –Ω–µ –Ω–∞–π–¥–µ–Ω!');
      return;
    }

    console.log(`‚úÖ –ù–∞–π–¥–µ–Ω —Ç–µ—Å—Ç: ${test.title}`);
    console.log(`üìä –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤: ${test.questions.length}\n`);

    // –°–æ–∑–¥–∞—ë–º –ª–µ–∫—Ü–∏—é
    console.log('üìù –°–æ–∑–¥–∞–Ω–∏–µ –ª–µ–∫—Ü–∏–∏...');
    const lecture = await prisma.lecture.create({
      data: {
        title: 'HTTP –°—Ç–∞—Ç—É—Å –∫–æ–¥—ã: –£—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (2xx)',
        topic: 'HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥—ã',
        content: lectureContent,
      },
    });

    console.log(`‚úÖ –õ–µ–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ —Å ID: ${lecture.id}\n`);

    // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –ª–µ–∫—Ü–∏—é –∫ –≤–æ–ø—Ä–æ—Å–∞–º —ç—Ç–æ–≥–æ —Ç–µ—Å—Ç–∞
    console.log('üîó –ü—Ä–∏–≤—è–∑–∫–∞ –ª–µ–∫—Ü–∏–∏ –∫ –≤–æ–ø—Ä–æ—Å–∞–º —Ç–µ—Å—Ç–∞...');
    const questionIds = test.questions.map((tq) => tq.questionId);

    let linkedCount = 0;
    for (const questionId of questionIds) {
      await prisma.question.update({
        where: { id: questionId },
        data: { lectureId: lecture.id },
      });
      linkedCount++;
    }

    console.log(`‚úÖ –õ–µ–∫—Ü–∏—è –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ ${linkedCount} –≤–æ–ø—Ä–æ—Å–∞–º\n`);

    console.log('üéâ –ì–æ—Ç–æ–≤–æ!');
    console.log(`\nüìö –õ–µ–∫—Ü–∏—è "${lecture.title}" —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ –∏ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ —Ç–µ—Å—Ç—É "${test.title}"`);
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ª–µ–∫—Ü–∏–∏:', error);
    throw error;
  } finally {
    await prisma.$disconnect();
  }
}

createLecture();
