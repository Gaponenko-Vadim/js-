import { PrismaClient } from '@prisma/client';
import { PrismaPg } from '@prisma/adapter-pg';
import { Pool } from 'pg';
import dotenv from 'dotenv';

dotenv.config();

const pool = new Pool({ connectionString: process.env.DATABASE_URL });
const adapter = new PrismaPg(pool);
const prisma = new PrismaClient({ adapter });

function cleanContent(content: string): string {
  return content
    .replace(/\0/g, '')
    .replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g, '');
}

const lectureContentRaw = `
# REST API Naming Best Practices

## –í–≤–µ–¥–µ–Ω–∏–µ

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –¥–≤–∞ –≥–æ—Ä–æ–¥–∞: –æ–¥–∏–Ω —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ —É–ª–∏—Ü ("Main Street", "Oak Avenue"), –¥—Ä—É–≥–æ–π - —Å —Ö–∞–æ—Ç–∏—á–Ω—ã–º–∏ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è–º–∏ ("Str_123", "road-to-somewhere", "PlaceX"). –í –∫–∞–∫–æ–º –≥–æ—Ä–æ–¥–µ –ª–µ–≥—á–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è? REST API - —ç—Ç–æ —Ç–µ –∂–µ —É–ª–∏—Ü—ã: —Ö–æ—Ä–æ—à–∏–µ –∏–º–µ–Ω–∞ –¥–µ–ª–∞—é—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—é –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ–π, –ø–ª–æ—Ö–∏–µ - –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç —Ä–∞–±–æ—Ç—É –≤ –∫–≤–µ—Å—Ç. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–∑—ã–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã, endpoints –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ REST API.

## –ü–æ—á–µ–º—É –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–Ω–æ?

### –ü—Ä–æ–±–ª–µ–º—ã –ø–ª–æ—Ö–æ–≥–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è

1. **Developer Experience —Å—Ç—Ä–∞–¥–∞–µ—Ç**
   - \`GET /getUserDataByID?userID=123\` vs \`GET /users/123\`
   - –ö–∞–∫–æ–π –ø–æ–Ω—è—Ç–Ω–µ–µ —Å –ø–µ—Ä–≤–æ–≥–æ –≤–∑–≥–ª—è–¥–∞?

2. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —É—Å–ª–æ–∂–Ω—è–µ—Ç—Å—è**
   - –ü—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –æ–±—ä—è—Å–Ω—è—Ç—å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è
   - –ë–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

3. **–û—à–∏–±–∫–∏ –∏ –ø—É—Ç–∞–Ω–∏—Ü–∞**
   - \`/user\` –∏ \`/users\` - —Ä–∞–∑–Ω—ã–µ endpoints –∏–ª–∏ –æ–ø–µ—á–∞—Ç–∫–∞?
   - \`/api/v1/users\` –∏ \`/users/v1\` - –∫–∞–∫–æ–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π?

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ö–æ—Ä–æ—à–∏—Ö –∏–º–µ–Ω

‚úÖ **Self-documenting API** - URL –æ–±—ä—è—Å–Ω—è–µ—Ç —Å–∞–º —Å–µ–±—è
‚úÖ **Consistency** - –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚úÖ **Developer-friendly** - –ª–µ–≥–∫–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
‚úÖ **Future-proof** - –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ, –Ω–µ –≥–ª–∞–≥–æ–ª—ã

REST - —ç—Ç–æ —Ä–∞–±–æ—Ç–∞ —Å **—Ä–µ—Å—É—Ä—Å–∞–º–∏** (—Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏), –∞ –Ω–µ –¥–µ–π—Å—Ç–≤–∏—è–º–∏ (–≥–ª–∞–≥–æ–ª–∞–º–∏).

‚ùå **–ü–ª–æ—Ö–æ:**
\`\`\`
GET  /getAllUsers
POST /createUser
POST /updateUser
POST /deleteUser
\`\`\`

‚úÖ **–•–æ—Ä–æ—à–æ:**
\`\`\`
GET    /users
POST   /users
PUT    /users/123
DELETE /users/123
\`\`\`

**HTTP –º–µ—Ç–æ–¥—ã —É–∂–µ –≤—ã—Ä–∞–∂–∞—é—Ç –¥–µ–π—Å—Ç–≤–∏–µ** - –Ω–µ –¥—É–±–ª–∏—Ä—É–π—Ç–µ —ç—Ç–æ –≤ URL.

#### –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: Non-CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ (Actions)

–î–ª—è –¥–µ–π—Å—Ç–≤–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≤–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ CRUD, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–ª–∞–≥–æ–ª –∫–∞–∫ sub-resource:

‚úÖ **Action endpoints:**
\`\`\`
POST /users/123/activate
POST /users/123/deactivate
POST /users/123/suspend
POST /orders/456/cancel
POST /invoices/789/send
\`\`\`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** \`/{resource}/{id}/{action}\`

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–º–µ–Ω–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω–∞—è):**
\`\`\`
POST /users/123 with body { "action": "activate" }
\`\`\`

–ù–æ —ç—Ç–æ –º–µ–Ω–µ–µ explicit –∏ —Å–ª–æ–∂–Ω–µ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å.

---

### 2. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–π

–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **plural** –¥–ª—è endpoint'–æ–≤, –¥–∞–∂–µ –µ—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç.

‚ùå **–ü–ª–æ—Ö–æ:**
\`\`\`
GET /user/123
GET /product/456
\`\`\`

‚úÖ **–•–æ—Ä–æ—à–æ:**
\`\`\`
GET /users/123
GET /products/456
\`\`\`

**–ü–æ—á–µ–º—É?**
- Consistency: \`/users\` (–∫–æ–ª–ª–µ–∫—Ü–∏—è) –∏ \`/users/123\` (–æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç) - –æ–¥–Ω–∞ —Å—Ö–µ–º–∞
- –õ–µ–≥–∫–æ —á–∏—Ç–∞—Ç—å: "users with id 123" - –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á—Ç–µ–Ω–∏–µ
- –°—Ç–∞–Ω–¥–∞—Ä—Ç –æ—Ç—Ä–∞—Å–ª–∏: Google, GitHub, Stripe –∏—Å–ø–æ–ª—å–∑—É—é—Ç plural

#### Singleton —Ä–µ—Å—É—Ä—Å—ã (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ)

–ï—Å–ª–∏ —Ä–µ—Å—É—Ä—Å –≤—Å–µ–≥–¥–∞ –æ–¥–∏–Ω (—Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏):

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ singular –±–µ–∑ ID:**
\`\`\`
GET /me           # –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
GET /settings     # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
GET /profile      # –ü—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
\`\`\`

–≠—Ç–∏ endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π –∫ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

---

### 3. –°—Ç–∏–ª—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è: kebab-case

–î–ª—è URL –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **kebab-case** (—Å–ª–æ–≤–∞ —á–µ—Ä–µ–∑ –¥–µ—Ñ–∏—Å).

‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: kebab-case**
\`\`\`
GET /user-profiles
GET /order-items
GET /shipping-addresses
\`\`\`

‚ùå **–ò–∑–±–µ–≥–∞–π—Ç–µ: snake_case**
\`\`\`
GET /user_profiles
GET /order_items
\`\`\`

‚ùå **–ò–∑–±–µ–≥–∞–π—Ç–µ: camelCase**
\`\`\`
GET /userProfiles
GET /orderItems
\`\`\`

**–ü–æ—á–µ–º—É kebab-case?**

1. **URL —Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ** (–≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–µ—Ä–≤–µ—Ä–æ–≤)
   - \`/userProfiles\` –∏ \`/userprofiles\` –º–æ–≥—É—Ç –±—ã—Ç—å –æ–¥–Ω–∏–º URL
   - camelCase —Ç–µ—Ä—è–µ—Ç —Å–º—ã—Å–ª

2. **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å**
   - \`/user-profiles\` —á–µ—Ç—á–µ —á–µ–º \`/user_profiles\`
   - –î–µ—Ñ–∏—Å—ã –≤–∏–∑—É–∞–ª—å–Ω–æ —Ä–∞–∑–¥–µ–ª—è—é—Ç —Å–ª–æ–≤–∞ –ª—É—á—à–µ

3. **SEO-friendly** (–µ—Å–ª–∏ API –æ—Ç–¥–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç)

4. **–°—Ç–∞–Ω–¥–∞—Ä—Ç –≤ –≤–µ–±**: GitHub, Google Cloud, AWS –∏—Å–ø–æ–ª—å–∑—É—é—Ç kebab-case

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è JSON –ø–æ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ camelCase –∏–ª–∏ snake_case (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —è–∑—ã–∫–∞ –±—ç–∫–µ–Ω–¥–∞), –Ω–æ –¥–ª—è URL - kebab-case.

---

### 4. Lowercase only

URL –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ **–Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ**.

‚ùå **–ü–ª–æ—Ö–æ:**
\`\`\`
GET /Users/123
GET /OrderItems
\`\`\`

‚úÖ **–•–æ—Ä–æ—à–æ:**
\`\`\`
GET /users/123
GET /order-items
\`\`\`

**–ü–æ—á–µ–º—É?**
- –ú–Ω–æ–≥–∏–µ —Å–µ—Ä–≤–µ—Ä—ã case-insensitive –¥–ª—è –ø—É—Ç–µ–π
- \`/Users\` –∏ \`/users\` –º–æ–≥—É—Ç –≤–µ—Å—Ç–∏ –Ω–∞ –æ–¥–∏–Ω endpoint - –ø—É—Ç–∞–Ω–∏—Ü–∞
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏

---

### 5. Trailing slash: –±—É–¥—å—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã

**–î–≤–∞ –ø–æ–¥—Ö–æ–¥–∞:**

**A) –ë–µ–∑ trailing slash (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
\`\`\`
GET /users
GET /users/123
\`\`\`

**B) –° trailing slash:**
\`\`\`
GET /users/
GET /users/123/
\`\`\`

**–ì–ª–∞–≤–Ω–æ–µ - consistency –≤–æ –≤—Å–µ–º API.**

‚ùå **–ü–ª–æ—Ö–æ (—Å–º–µ—à–µ–Ω–∏–µ):**
\`\`\`
GET /users      # –ë–µ–∑ /
GET /products/  # –° /
\`\`\`

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–µ—Ä–≤–µ—Ä—ã (Apache) —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—é—Ç \`/users\` –∏ \`/users/\` –∫–∞–∫ —Ä–∞–∑–Ω—ã–µ URL
- –ú–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å 301 —Ä–µ–¥–∏—Ä–µ–∫—Ç, —á—Ç–æ –∑–∞–º–µ–¥–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
- –°—Ç–∞–Ω–¥–∞—Ä—Ç: **–±–µ–∑ trailing slash** (Google, GitHub, Stripe)

**Recommendation:** –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ trailing slash. –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞–ª –µ–≥–æ - –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ –∏–ª–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç–µ.

---

## –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API

### –ü–æ–¥—Ö–æ–¥—ã –∫ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é

#### 1. URL versioning (—Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π)

\`\`\`
GET /v1/users
GET /v2/users
\`\`\`

–∏–ª–∏
\`\`\`
GET /api/v1/users
GET /api/v2/users
\`\`\`

**–ü–ª—é—Å—ã:**
‚úÖ –Ø–≤–Ω–æ –≤–∏–¥–Ω–æ –≤ URL
‚úÖ –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
‚úÖ –ü—Ä–æ—Å—Ç–æ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å (—Ä–∞–∑–Ω—ã–µ URL)
‚úÖ –ü–æ–Ω—è—Ç–Ω–æ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ú–∏–Ω—É—Å—ã:**
‚ùå –ù–∞—Ä—É—à–∞–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø REST (–≤–µ—Ä—Å–∏—è –Ω–µ —á–∞—Å—Ç—å —Ä–µ—Å—É—Ä—Å–∞)
‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö endpoints

#### 2. Header versioning

\`\`\`
GET /users
Accept: application/vnd.myapi.v1+json
\`\`\`

**–ü–ª—é—Å—ã:**
‚úÖ –ß–∏—Å—Ç—ã–µ URL
‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç REST –∏–¥–µ–æ–ª–æ–≥–∏–∏

**–ú–∏–Ω—É—Å—ã:**
‚ùå –°–ª–æ–∂–Ω–µ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
‚ùå –ú–µ–Ω–µ–µ –æ—á–µ–≤–∏–¥–Ω–æ

#### 3. Query parameter (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

\`\`\`
GET /users?version=1
\`\`\`

**–ú–∏–Ω—É—Å—ã:**
‚ùå –ü—É—Ç–∞–Ω–∏—Ü–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
‚ùå –õ–µ–≥–∫–æ –∑–∞–±—ã—Ç—å –ø–µ—Ä–µ–¥–∞—Ç—å
‚ùå –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ª–æ–∂–Ω—è–µ—Ç—Å—è

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ URL versioning:**

‚úÖ \`/v1/users\` - –≤–µ—Ä—Å–∏—è –ø–µ—Ä–µ–¥ resource
‚úÖ \`/api/v1/users\` - –µ—Å–ª–∏ –Ω—É–∂–µ–Ω /api prefix

‚ùå \`/users/v1\` - –≤–µ—Ä—Å–∏—è –ø–æ—Å–ª–µ resource (–Ω–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ)

**–ü–æ—Ä—è–¥–æ–∫:** \`/api/v1/users\` > \`/v1/api/users\`

\`/api/v1/users\` - –≤–µ—Ä—Å–∏—è –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ API, –Ω–µ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ä–µ—Å—É—Ä—Å—É.

### –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö endpoints

‚ùå **–ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:**
\`\`\`
GET /v1/users
GET /v2/users
GET /v1/orders   # –ó–∞—á–µ–º v1 –µ—Å–ª–∏ orders –Ω–µ –∏–∑–º–µ–Ω—è–ª—Å—è?
\`\`\`

‚úÖ **–õ—É—á—à–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å API:**
–í—Å–µ endpoints –≤ \`/v2\` –Ω–∞—Å–ª–µ–¥—É—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è, –¥–∞–∂–µ –µ—Å–ª–∏ \`/orders\` –Ω–µ –º–µ–Ω—è–ª—Å—è - –∫–ª–∏–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–¥–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π API —Ü–µ–ª–∏–∫–æ–º.

**–ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é?**
- Breaking changes (–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–∞)
- –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–µ–º–∞–Ω—Ç–∏–∫–∏

**–ö–æ–≥–¥–∞ –ù–ï –Ω—É–∂–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è?**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π (backwards compatible)
- –ù–æ–≤—ã–µ endpoints
- Bug fixes

---

## –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (Nested Resources)

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å

–ï—Å–ª–∏ —Ä–µ—Å—É—Ä—Å **–≤—Å–µ–≥–¥–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç** –¥—Ä—É–≥–æ–º—É —Ä–µ—Å—É—Ä—Å—É, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å:

‚úÖ **–•–æ—Ä–æ—à–æ:**
\`\`\`
GET /users/123/orders          # –í—Å–µ –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123
GET /posts/456/comments        # –í—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç—É 456
GET /posts/456/comments/789    # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π 789 –∫ –ø–æ—Å—Ç—É 456
\`\`\`

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: top-level —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

\`\`\`
GET /orders?user_id=123
GET /comments?post_id=456
GET /comments/789
\`\`\`

**–û–±–∞ –ø–æ–¥—Ö–æ–¥–∞ –≤–∞–ª–∏–¥–Ω—ã.** –í—ã–±–æ—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–µ–º–∞–Ω—Ç–∏–∫–∏:

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –∫–æ–≥–¥–∞:**
- –†–µ—Å—É—Ä—Å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –±–µ–∑ —Ä–æ–¥–∏—Ç–µ–ª—è
- –õ–æ–≥–∏—á–µ—Å–∫–∏ —á–∏—Ç–∞–µ—Ç—Å—è: "–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ—Å—Ç–∞ 456"

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ top-level –∫–æ–≥–¥–∞:**
- –†–µ—Å—É—Ä—Å –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- –ù—É–∂–Ω–∞ –≥–∏–±–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≥–ª—É–±–∏–Ω—ã

‚ùå **–ò–∑–±–µ–≥–∞–π—Ç–µ –≥–ª—É–±–æ–∫–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏:**
\`\`\`
GET /users/123/orders/456/items/789/reviews/111
\`\`\`

–≠—Ç–æ —Å–ª–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å.

‚úÖ **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ 2 —É—Ä–æ–≤–Ω—è–º–∏:**
\`\`\`
GET /orders/456/items
GET /items/789/reviews
\`\`\`

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ top-level:
\`\`\`
GET /reviews?item_id=789
\`\`\`

---

## –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã endpoints

### 1. Bulk –æ–ø–µ—Ä–∞—Ü–∏–∏

–î–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ prefixes:

‚úÖ **Bulk delete:**
\`\`\`
POST /users/bulk-delete
Body: { "ids": [1, 2, 3] }
\`\`\`

‚úÖ **Batch update:**
\`\`\`
PATCH /users/batch
Body: { "updates": [{ "id": 1, "status": "active" }, ...] }
\`\`\`

‚ùå **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:**
\`\`\`
DELETE /users   # –ù–µ–ø–æ–Ω—è—Ç–Ω–æ: —É–¥–∞–ª–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–ª–∏ –æ—à–∏–±–∫–∞?
\`\`\`

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
\`\`\`
POST /batch/users/delete
POST /users/delete-many
\`\`\`

**–ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞**, –Ω–æ –≥–ª–∞–≤–Ω–æ–µ:
- –Ø–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å —á—Ç–æ —ç—Ç–æ bulk –æ–ø–µ—Ä–∞—Ü–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å POST (–¥–∞–∂–µ –¥–ª—è delete) —Å —Ç–µ–ª–æ–º –∑–∞–ø—Ä–æ—Å–∞

### 2. –ê–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ sub-resource —Å —è–≤–Ω—ã–º –∏–º–µ–Ω–µ–º:

‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
\`\`\`
GET /users/stats
GET /orders/summary
GET /products/aggregations
\`\`\`

**Response:**
\`\`\`json
{
  "total_users": 10000,
  "active_users": 8500,
  "new_today": 42
}
\`\`\`

‚ùå **–ù–µ —Å–º–µ—à–∏–≤–∞–π—Ç–µ:**
\`\`\`
GET /users?aggregate=true   # –ü—É—Ç–∞–Ω–∏—Ü–∞ —Å –æ–±—ã—á–Ω—ã–º GET
\`\`\`

### 3. –≠–∫—Å–ø–æ—Ä—Ç –∏ –∏–º–ø–æ—Ä—Ç

**–í–∞—Ä–∏–∞–Ω—Ç 1: Sub-resource (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
\`\`\`
POST /users/exports         # –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É —ç–∫—Å–ø–æ—Ä—Ç–∞
GET  /users/exports/123     # –°—Ç–∞—Ç—É—Å —ç–∫—Å–ø–æ—Ä—Ç–∞
POST /users/imports         # –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª –∏–º–ø–æ—Ä—Ç–∞
\`\`\`

**–í–∞—Ä–∏–∞–Ω—Ç 2: Top-level:**
\`\`\`
POST /exports/users
POST /imports/users
\`\`\`

–û–±–∞ –ø–æ–¥—Ö–æ–¥–∞ –≤–∞–ª–∏–¥–Ω—ã. –ü–µ—Ä–≤—ã–π –±–æ–ª–µ–µ RESTful (—ç–∫—Å–ø–æ—Ä—Ç - —ç—Ç–æ sub-resource –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π).

**–î–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞:**
\`\`\`
GET /users/exports/123/download
\`\`\`

### 4. –ü–æ–∏—Å–∫ (Search)

**–ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫:**
\`\`\`
GET /search?q=john&type=users,posts
\`\`\`

**–ü–æ–∏—Å–∫ –≤ —Ä–µ—Å—É—Ä—Å–µ:**
\`\`\`
GET /users/search?q=john
GET /users?q=john          # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —á–µ—Ä–µ–∑ —Ñ–∏–ª—å—Ç—Ä
\`\`\`

**–û–±–∞ –ø–æ–¥—Ö–æ–¥–∞ –≤–∞–ª–∏–¥–Ω—ã:**
- \`/search\` - –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º —Ç–∏–ø–∞–º
- \`/users/search\` - –ø–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ —Å—Ä–µ–¥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- \`/users?q=\` - –ø–æ–∏—Å–∫ –∫–∞–∫ —Ñ–∏–ª—å—Ç—Ä (–±–æ–ª–µ–µ RESTful)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ \`?q=\` –ø–∞—Ä–∞–º–µ—Ç—Ä. –î–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ (multi-type, facets) - \`/search\` endpoint.

### 5. Webhooks –∏ Callbacks

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–º–µ–Ω–∞:**
\`\`\`
POST /webhooks              # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è webhook
GET  /webhooks              # –°–ø–∏—Å–æ–∫ webhooks
DELETE /webhooks/123        # –£–¥–∞–ª–∏—Ç—å webhook
\`\`\`

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã: \`/callbacks\`, \`/hooks\` - –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.

**–ì–ª–∞–≤–Ω–æ–µ:** –í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω–æ –∏–º—è –∏ –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ—Å—å –µ–≥–æ.

### 6. –í—Ä–µ–º–µ–Ω–Ω—ã–µ endpoints

–î–ª—è draft, preview, –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤:

‚úÖ **Semantic naming:**
\`\`\`
GET /posts/drafts           # –ß–µ—Ä–Ω–æ–≤–∏–∫–∏ –ø–æ—Å—Ç–æ–≤
GET /posts/123/preview      # –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å—Ç–∞
\`\`\`

‚ùå **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ generic \`/temp\`:**
\`\`\`
GET /temp/posts   # –ß—Ç–æ —ç—Ç–æ? –ß–µ—Ä–Ω–æ–≤–∏–∫–∏? –í—Ä–µ–º–µ–Ω–Ω—ã–µ? –£–¥–∞–ª–µ–Ω–Ω—ã–µ?
\`\`\`

**–ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–µ–º–∞–Ω—Ç–∏–∫–∏:** –≤—ã–±–∏—Ä–∞–π—Ç–µ –∏–º—è, –æ—Ç—Ä–∞–∂–∞—é—â–µ–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.

---

## –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π –≤ JSON

### Boolean –ø–æ–ª—è

**–í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø—Ä–∏–µ–º–ª–µ–º—ã:**

‚úÖ \`is_active\` (snake_case, backend convention)
‚úÖ \`active\` (–ª–∞–∫–æ–Ω–∏—á–Ω–æ)
‚úÖ \`hasAccess\` (camelCase, frontend convention)

**–í—ã–±–æ—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —è–∑—ã–∫–∞ –±—ç–∫–µ–Ω–¥–∞:**

- **Python/Ruby backend:** \`is_active\`, \`has_access\`
- **JavaScript/Node backend:** \`isActive\`, \`hasAccess\`
- **Go backend:** \`Active\`, \`HasAccess\` (PascalCase –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞)

**–ì–ª–∞–≤–Ω–æ–µ:** Consistency –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ API.

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–µ –ø—É—Ç–∞–π—Ç–µ URL (kebab-case) –∏ JSON fields (snake_case/camelCase).

### –í–∫–ª—é—á–µ–Ω–∏–µ —Ç–∏–ø–∞ —Ä–µ—Å—É—Ä—Å–∞

‚ùå **–ù–µ –Ω—É–∂–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–ø –≤ –∫–∞–∂–¥–æ–º –æ–±—ä–µ–∫—Ç–µ:**
\`\`\`json
{
  "type": "user",
  "id": 123,
  "name": "John"
}
\`\`\`

Endpoint \`/users/123\` —É–∂–µ –≥–æ–≤–æ—Ä–∏—Ç —á—Ç–æ —ç—Ç–æ user.

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –≥–µ—Ç–µ—Ä–æ–≥–µ–Ω–Ω—ã—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π:**
\`\`\`json
{
  "results": [
    { "type": "user", "id": 1, "name": "John" },
    { "type": "post", "id": 2, "title": "Hello" }
  ]
}
\`\`\`

**–ü—Ä–∏–º–µ—Ä:** —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞, –≥–¥–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã.

---

## Content Negotiation vs File Extensions

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏

‚úÖ **–•–æ—Ä–æ—à–æ:**
\`\`\`
GET /users/123
Accept: application/json

GET /users/123
Accept: application/xml
\`\`\`

‚ùå **–ò–∑–±–µ–≥–∞–π—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π:**
\`\`\`
GET /users/123.json
GET /users/123.xml
\`\`\`

**–ü–æ—á–µ–º—É?**
- –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –Ω–µ —á–∞—Å—Ç—å —Ä–µ—Å—É—Ä—Å–∞
- –ù–∞—Ä—É—à–∞—é—Ç —Å–µ–º–∞–Ω—Ç–∏–∫—É REST
- –£—Å–ª–æ–∂–Ω—è—é—Ç —Ä–æ—É—Ç–∏–Ω–≥

**–ò—Å–∫–ª—é—á–µ–Ω–∏–µ:** –î–ª—è backwards compatibility —Å legacy —Å–∏—Å—Ç–µ–º–∞–º–∏.

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ \`Accept\`** - —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π HTTP –º–µ—Ö–∞–Ω–∏–∑–º.

---

## –ê–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã –≤ URL

### –ü—Ä–∞–≤–∏–ª–æ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∏ **–æ–±—â–µ–ø—Ä–∏–Ω—è—Ç—ã–µ**.

‚úÖ **–ú–æ–∂–Ω–æ:**
\`\`\`
GET /api/users
GET /sms/messages
GET /pdf/reports
\`\`\`

‚ùå **–ò–∑–±–µ–≥–∞–π—Ç–µ custom –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä:**
\`\`\`
GET /usr/prfl    # –ß—Ç–æ —ç—Ç–æ? user profiles?
GET /ord/itm     # order items?
\`\`\`

**–ï—Å–ª–∏ —Å–æ–º–Ω–µ–≤–∞–µ—Ç–µ—Å—å - –ø–∏—à–∏—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é:**
\`\`\`
GET /user-profiles
GET /order-items
\`\`\`

–î–ª–∏–Ω–Ω—ã–π URL –ª—É—á—à–µ —á–µ–º –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–π.

---

## Comparison Table: Best Practices

| –ê—Å–ø–µ–∫—Ç | ‚ùå –ü–ª–æ—Ö–æ | ‚úÖ –•–æ—Ä–æ—à–æ |
|--------|----------|-----------|
| **–ì–ª–∞–≥–æ–ª—ã** | \`/getUsers\` | \`GET /users\` |
| **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ** | \`/user/123\` | \`/users/123\` |
| **–†–µ–≥–∏—Å—Ç—Ä** | \`/userProfiles\` | \`/user-profiles\` |
| **Trailing slash** | –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ | –í—Å–µ–≥–¥–∞ –±–µ–∑ \`/\` |
| **–í–µ—Ä—Å–∏–∏** | \`?version=1\` | \`/v1/users\` |
| **Actions** | \`/activateUser/123\` | \`POST /users/123/activate\` |
| **–í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å** | \`/a/1/b/2/c/3/d/4\` | Max 2 —É—Ä–æ–≤–Ω—è |
| **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è** | \`/users/123.json\` | \`Accept: application/json\` |

---

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –•–æ—Ä–æ—à–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API

\`\`\`
# –ö–æ–ª–ª–µ–∫—Ü–∏–∏
GET    /v1/users
POST   /v1/users
GET    /v1/users/123
PUT    /v1/users/123
PATCH  /v1/users/123
DELETE /v1/users/123

# –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
GET    /v1/users/123/orders
POST   /v1/users/123/orders
GET    /v1/users/123/orders/456

# Actions
POST   /v1/users/123/activate
POST   /v1/orders/456/cancel
POST   /v1/invoices/789/send

# Bulk operations
POST   /v1/users/bulk-delete
PATCH  /v1/users/batch

# Aggregations
GET    /v1/users/stats
GET    /v1/orders/summary

# Search
GET    /v1/users?q=john
GET    /v1/search?q=john&type=users,posts

# Singletons
GET    /v1/me
GET    /v1/settings
\`\`\`

### –ü–ª–æ—Ö–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API

\`\`\`
GET  /GetAllUsers           # –ì–ª–∞–≥–æ–ª –≤ URL
POST /user                  # –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ
GET  /UserProfiles          # camelCase
GET  /api/users/v1/         # –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ + trailing slash
POST /users/123/delete      # DELETE –≤–º–µ—Å—Ç–æ POST
GET  /users/1/orders/2/items/3/reviews/4  # –°–ª–∏—à–∫–æ–º –≥–ª—É–±–æ–∫–æ
GET  /usr/123.json          # –ê–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä–∞ + —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
\`\`\`

---

## Advanced Topics

### Hypermedia / HATEOAS

–î–ª—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ RESTful API –≤–∫–ª—é—á–∞–π—Ç–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:

\`\`\`json
{
  "id": 123,
  "name": "John",
  "links": {
    "self": "/users/123",
    "orders": "/users/123/orders",
    "activate": { "href": "/users/123/activate", "method": "POST" }
  }
}
\`\`\`

–ö–ª–∏–µ–Ω—Ç –Ω–µ –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä—É–µ—Ç URLs –≤—Ä—É—á–Ω—É—é, –∞ —Å–ª–µ–¥—É–µ—Ç –ø–æ —Å—Å—ã–ª–∫–∞–º.

### Resource vs Action –¥–∏lemma

–ò–Ω–æ–≥–¥–∞ –¥–µ–π—Å—Ç–≤–∏–µ –º–æ–∂–Ω–æ –≤—ã—Ä–∞–∑–∏—Ç—å –∫–∞–∫ —Ä–µ—Å—É—Ä—Å:

**Action:**
\`\`\`
POST /orders/123/cancel
\`\`\`

**Resource:**
\`\`\`
PATCH /orders/123
Body: { "status": "cancelled" }
\`\`\`

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å:**
- –î–µ–π—Å—Ç–≤–∏–µ - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- –ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å action:**
- –°–ª–æ–∂–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (refund, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –∏ —Ç.–¥.)
- –î–µ–π—Å—Ç–≤–∏–µ –Ω–µ —Å–≤–æ–¥–∏—Ç—Å—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—é –æ–¥–Ω–æ–≥–æ –ø–æ–ª—è

---

## Checklist: –∏–¥–µ–∞–ª—å–Ω—ã–π REST API naming

- [ ] –°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –≤ URL, –Ω–µ –≥–ª–∞–≥–æ–ª—ã
- [ ] –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–π
- [ ] kebab-case –¥–ª—è URL
- [ ] Lowercase everywhere
- [ ] –ë–µ–∑ trailing slash (–∏–ª–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —Å –Ω–∏–º)
- [ ] –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ URL: \`/v1/resource\`
- [ ] –í–µ—Ä—Å–∏—è –ø–µ—Ä–µ–¥ —Ä–µ—Å—É—Ä—Å–æ–º: \`/api/v1/users\` > \`/v1/api/users\`
- [ ] Actions –∫–∞–∫ sub-resource: \`POST /users/123/activate\`
- [ ] –í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –º–∞–∫—Å–∏–º—É–º 2 —É—Ä–æ–≤–Ω—è
- [ ] –ë–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π (.json, .xml) - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Accept
- [ ] Bulk –æ–ø–µ—Ä–∞—Ü–∏–∏ —è–≤–Ω–æ: \`/bulk-delete\`, \`/batch\`
- [ ] Singleton –±–µ–∑ ID: \`/me\`, \`/settings\`
- [ ] –ü–æ–ª–Ω—ã–µ —Å–ª–æ–≤–∞, –Ω–µ –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã (–∫—Ä–æ–º–µ –æ–±—â–µ–ø—Ä–∏–Ω—è—Ç—ã—Ö)
- [ ] Consistent boolean –ø–æ–ª—è: \`is_active\` –∏–ª–∏ \`isActive\`
- [ ] –î–µ—Ñ–∏—Å –≤–º–µ—Å—Ç–æ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è: \`user-profiles\` > \`user_profiles\`

---

## –†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã (Real-world APIs)

### GitHub API v3

\`\`\`
GET /users/:username
GET /repos/:owner/:repo
GET /repos/:owner/:repo/issues
POST /repos/:owner/:repo/issues
PATCH /repos/:owner/:repo/issues/:number
\`\`\`

‚úÖ kebab-case, plural, noun-based

### Stripe API

\`\`\`
GET /v1/customers
POST /v1/customers
GET /v1/customers/:id
POST /v1/customers/:id/sources
DELETE /v1/customers/:id
\`\`\`

‚úÖ –í–µ—Ä—Å–∏—è –≤ URL, –¥–µ–π—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥—ã

### Twitter API v2

\`\`\`
GET /2/users/:id
GET /2/tweets/:id
POST /2/tweets
GET /2/users/:id/followers
\`\`\`

‚úÖ –í–µ—Ä—Å–∏—è –∫–∞–∫ major path

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ì–ª–∞–≤–Ω—ã–µ takeaways:**

1. **Consistency –ø—Ä–µ–≤—ã—à–µ –≤—Å–µ–≥–æ** - –≤—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å –∏ –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ—Å—å –µ–≥–æ
2. **Intuitive > clever** - –ø–æ–Ω—è—Ç–Ω—ã–π URL –ª—É—á—à–µ "—É–º–Ω–æ–≥–æ"
3. **Follow standards** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ kebab-case, plural, noun-based
4. **HTTP –º–µ—Ç–æ–¥—ã –≤—ã—Ä–∞–∂–∞—é—Ç –¥–µ–π—Å—Ç–≤–∏—è** - –Ω–µ –¥—É–±–ª–∏—Ä—É–π—Ç–µ –≤ URL
5. **Version early** - –¥–æ–±–∞–≤—å—Ç–µ –≤–µ—Ä—Å–∏—é —Å –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è
6. **Document everything** - —Ö–æ—Ä–æ—à–∏–µ –∏–º–µ–Ω–∞ –Ω–µ –æ—Ç–º–µ–Ω—è—é—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

**–§–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ API:**

\`\`\`
GET    /api/v1/users
POST   /api/v1/users
GET    /api/v1/users/123
PUT    /api/v1/users/123
DELETE /api/v1/users/123
POST   /api/v1/users/123/activate
GET    /api/v1/users/123/orders
POST   /api/v1/users/bulk-delete
GET    /api/v1/me
\`\`\`

–°–ª–µ–¥—É—è —ç—Ç–∏–º –ø—Ä–∞–≤–∏–ª–∞–º, –≤—ã —Å–æ–∑–¥–∞–¥–∏—Ç–µ API, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–ª—é–±—è—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.
`;

const lectureContent = cleanContent(lectureContentRaw);

async function createLecture() {
  try {
    console.log('üîß –°–æ–∑–¥–∞–Ω–∏–µ –ª–µ–∫—Ü–∏–∏ "REST API naming best practices"...\n');

    const lecture = await prisma.lecture.create({
      data: {
        title: 'REST API Naming Best Practices',
        topic: 'REST API naming best practices',
        content: lectureContent,
      },
    });

    console.log(`‚úÖ –õ–µ–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ —Å ID: ${lecture.id}\n`);

    const test = await prisma.test.findFirst({
      where: {
        title: { contains: 'naming' },
      },
      include: {
        questions: {
          include: {
            question: true,
          },
        },
      },
    });

    if (!test) {
      console.log('‚ùå –¢–µ—Å—Ç "REST API naming best practices" –Ω–µ –Ω–∞–π–¥–µ–Ω');
      return;
    }

    console.log(`üìù –ù–∞–π–¥–µ–Ω —Ç–µ—Å—Ç: ${test.title}`);
    console.log(`‚ùì –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤: ${test.questions.length}\n`);

    const questionIds = test.questions.map((tq) => tq.questionId);

    const updateResult = await prisma.question.updateMany({
      where: {
        id: {
          in: questionIds,
        },
      },
      data: {
        lectureId: lecture.id,
      },
    });

    console.log(`‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ –≤–æ–ø—Ä–æ—Å–æ–≤: ${updateResult.count}`);
    console.log(`‚úÖ –í—Å–µ –≤–æ–ø—Ä–æ—Å—ã —Ç–µ—Å—Ç–∞ "${test.title}" —Å–≤—è–∑–∞–Ω—ã —Å –ª–µ–∫—Ü–∏–µ–π!\n`);

    const verification = await prisma.question.findMany({
      where: {
        id: { in: questionIds },
        lectureId: lecture.id,
      },
    });

    console.log('üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è:');
    console.log(`   –í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ —Ç–µ—Å—Ç–µ: ${questionIds.length}`);
    console.log(`   –°–≤—è–∑–∞–Ω–æ —Å –ª–µ–∫—Ü–∏–µ–π: ${verification.length}`);
    console.log(
      `   –ü–æ–∫—Ä—ã—Ç–∏–µ: ${((verification.length / questionIds.length) * 100).toFixed(1)}%`
    );
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞:', error);
    throw error;
  } finally {
    await prisma.$disconnect();
  }
}

createLecture();
