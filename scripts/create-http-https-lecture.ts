import { PrismaClient } from '@prisma/client';
import { PrismaPg } from '@prisma/adapter-pg';
import { Pool } from 'pg';
import dotenv from 'dotenv';
import path from 'path';

const envPath = path.resolve(__dirname, '..', '.env');
dotenv.config({ path: envPath });

if (!process.env.DATABASE_URL) {
  console.error('‚ùå DATABASE_URL –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
  process.exit(1);
}

const pool = new Pool({ connectionString: process.env.DATABASE_URL });
const adapter = new PrismaPg(pool);
const prisma = new PrismaClient({ adapter });

function cleanContent(text: string): string {
  return text.replace(/[\u0000-\u0008\u000B\u000C\u000E-\u001F\u007F-\u009F]/g, '');
}

const lectureContent = cleanContent(`# HTTP –∏ HTTPS: –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

## –í–≤–µ–¥–µ–Ω–∏–µ: –†–∞–∑–≥–æ–≤–æ—Ä –º–µ–∂–¥—É –±—Ä–∞—É–∑–µ—Ä–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º üí¨

### –ê–Ω–∞–ª–æ–≥–∏—è —Å –ø–æ—á—Ç–æ–≤–æ–π —Å–ª—É–∂–±–æ–π üìÆ

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ –ø–∏—Å—å–º–æ –¥—Ä—É–≥—É:

**HTTP ‚Äî —ç—Ç–æ –∫–∞–∫ –æ—Ç–∫—Ä—ã—Ç–∞—è –ø–æ—á—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞:**
- –í—ã –ø–∏—à–µ—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ
- –õ—é–±–æ–π –ø–æ—á—Ç–∞–ª—å–æ–Ω –∏–ª–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤—â–∏–∫ –º–æ–∂–µ—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∏–¥–Ω–æ –≤—Å–µ–º, –∫—Ç–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É
- –ë—ã—Å—Ç—Ä–æ, –ø—Ä–æ—Å—Ç–æ, –Ω–æ **–Ω–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ**

**HTTPS ‚Äî —ç—Ç–æ –∫–∞–∫ –∑–∞–∫–∞–∑–Ω–æ–µ –ø–∏—Å—å–º–æ –≤ –∑–∞–ø–µ—á–∞—Ç–∞–Ω–Ω–æ–º –∫–æ–Ω–≤–µ—Ä—Ç–µ:**
- –í—ã –∫–ª–∞–¥–µ—Ç–µ –ø–∏—Å—å–º–æ –≤ –∫–æ–Ω–≤–µ—Ä—Ç –∏ **–∑–∞–ø–µ—á–∞—Ç—ã–≤–∞–µ—Ç–µ –µ–≥–æ**
- –ù–∏–∫—Ç–æ –∫—Ä–æ–º–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
- –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –≤—Å–∫—Ä—ã—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç ‚Äî —ç—Ç–æ –±—É–¥–µ—Ç –∑–∞–º–µ—Ç–Ω–æ
- –ß—É—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ **–±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ**

### –ó–∞—á–µ–º –Ω—É–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å HTTP –∏ HTTPS?

–í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –≤–µ–±–µ:
- üîí **95% —Ç–æ–ø-—Å–∞–π—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç HTTPS** (–ø–æ –¥–∞–Ω–Ω—ã–º Google)
- üö´ **–ë—Ä–∞—É–∑–µ—Ä—ã –ø–æ–º–µ—á–∞—é—Ç HTTP —Å–∞–π—Ç—ã –∫–∞–∫ "–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ"**
- üí≥ **–ü–ª–∞—Ç–µ–∂–∏, –ª–æ–≥–∏–Ω—ã, –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** —Ç—Ä–µ–±—É—é—Ç HTTPS
- üîç **Google —Ä–∞–Ω–∂–∏—Ä—É–µ—Ç HTTPS —Å–∞–π—Ç—ã –≤—ã—à–µ** –≤ –ø–æ–∏—Å–∫–µ
- üì± **–ú–Ω–æ–≥–∏–µ API —Ç—Ä–µ–±—É—é—Ç HTTPS** –¥–ª—è —Ä–∞–±–æ—Ç—ã

---

## –ß—Ç–æ —Ç–∞–∫–æ–µ HTTP?

**HTTP (HyperText Transfer Protocol)** ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–¥–∞—á–∏ –≥–∏–ø–µ—Ä—Ç–µ–∫—Å—Ç–∞, –æ—Å–Ω–æ–≤–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –≤ World Wide Web.

### –ë–∞–∑–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ HTTP

**–í–µ—Ä—Å–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞:**
- HTTP/0.9 (1991) ‚Äî —Ç–æ–ª—å–∫–æ GET, —Ç–æ–ª—å–∫–æ HTML
- HTTP/1.0 (1996) ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≥–æ–ª–æ–≤–∫–∏, –º–µ—Ç–æ–¥—ã, —Å—Ç–∞—Ç—É—Å –∫–æ–¥—ã
- HTTP/1.1 (1997) ‚Äî persistent connections, chunked transfer
- HTTP/2 (2015) ‚Äî multiplexing, binary protocol
- HTTP/3 (2022) ‚Äî QUIC –≤–º–µ—Å—Ç–æ TCP

**–ü–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** 80

**–ú–æ–¥–µ–ª—å OSI:** –£—Ä–æ–≤–µ–Ω—å 7 (Application Layer)

**–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª:** TCP (HTTP/1.x, HTTP/2), QUIC/UDP (HTTP/3)

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** Stateless (–±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è)

### –ß—Ç–æ –∑–Ω–∞—á–∏—Ç Stateless?

\`\`\`
–ö–ª–∏–µ–Ω—Ç ‚Üí GET /page1 ‚Üí –°–µ—Ä–≤–µ—Ä
        ‚Üê 200 OK      ‚Üê

–ö–ª–∏–µ–Ω—Ç ‚Üí GET /page2 ‚Üí –°–µ—Ä–≤–µ—Ä
        ‚Üê 200 OK      ‚Üê  (–°–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–º–Ω–∏—Ç —á—Ç–æ —ç—Ç–æ —Ç–æ—Ç –∂–µ –∫–ª–∏–µ–Ω—Ç!)
\`\`\`

–ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å **–Ω–µ–∑–∞–≤–∏—Å–∏–º**. –°–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–º–Ω–∏—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç —ç—Ç–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞.

**–ö–∞–∫ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ?**
- **Cookies** ‚Äî –±—Ä–∞—É–∑–µ—Ä —Ö—Ä–∞–Ω–∏—Ç ID —Å–µ—Å—Å–∏–∏
- **–¢–æ–∫–µ–Ω—ã** ‚Äî –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ (JWT)
- **Session Storage** ‚Äî —Å–µ—Ä–≤–µ—Ä —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –≤ –ø–∞–º—è—Ç–∏/–ë–î

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ HTTP –∑–∞–ø—Ä–æ—Å–∞

\`\`\`http
GET /api/users/123 HTTP/1.1
Host: example.com
User-Agent: Mozilla/5.0
Accept: application/json
Cookie: sessionId=abc123

(–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞)

[–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞, –µ—Å–ª–∏ –µ—Å—Ç—å]
\`\`\`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **–°—Ç–∞—Ä—Ç–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞**: –º–µ—Ç–æ–¥ + –ø—É—Ç—å + –≤–µ—Ä—Å–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
2. **–ó–∞–≥–æ–ª–æ–≤–∫–∏**: –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞ (Host, Content-Type, etc.)
3. **–ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞**: —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
4. **–¢–µ–ª–æ** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –¥–∞–Ω–Ω—ã–µ (JSON, XML, form data)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ HTTP –æ—Ç–≤–µ—Ç–∞

\`\`\`http
HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 58
Set-Cookie: sessionId=xyz789

{"id": 123, "name": "John", "email": "john@example.com"}
\`\`\`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **–°—Ç–∞—Ç—É—Å –ª–∏–Ω–∏—è**: –≤–µ—Ä—Å–∏—è + –∫–æ–¥ + —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—É—Å–∞
2. **–ó–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞**: Content-Type, Set-Cookie, Cache-Control
3. **–ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞**
4. **–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞**: –¥–∞–Ω–Ω—ã–µ (HTML, JSON, —Ñ–∞–π–ª)

---

## –ß—Ç–æ —Ç–∞–∫–æ–µ HTTPS?

**HTTPS (HTTP Secure)** = HTTP + SSL/TLS —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ

### SSL vs TLS: –∏—Å—Ç–æ—Ä–∏—è

- **SSL 1.0** (1994) ‚Äî –Ω–µ –≤—ã–ø—É—â–µ–Ω (—Å–µ—Ä—å–µ–∑–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏)
- **SSL 2.0** (1995) ‚Äî –≤—ã–ø—É—â–µ–Ω, –Ω–æ —É—è–∑–≤–∏–º
- **SSL 3.0** (1996) ‚Äî —É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
- **TLS 1.0** (1999) ‚Äî –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω SSL ‚Üí TLS
- **TLS 1.1** (2006) ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- **TLS 1.2** (2008) ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç
- **TLS 1.3** (2018) ‚Äî —Ç–µ–∫—É—â–∏–π, —Å–∞–º—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π

üí° **–í–∞–∂–Ω–æ:** –¢–µ—Ä–º–∏–Ω "SSL" –≤—Å—ë –µ—â—ë –ø–æ–ø—É–ª—è—Ä–µ–Ω, –Ω–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–∞–π—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç **TLS 1.2** –∏–ª–∏ **TLS 1.3**.

### –¢—Ä–∏ —Å—Ç–æ–ª–ø–∞ HTTPS

**1. –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å (Confidentiality) üîí**
- –î–∞–Ω–Ω—ã–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã
- –ù–∏–∫—Ç–æ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ

**2. –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å (Integrity) ‚úÖ**
- –î–∞–Ω–Ω—ã–µ –Ω–µ –∏–∑–º–µ–Ω–µ–Ω—ã –≤ –ø—É—Ç–∏
- –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç—Å—è –ª—é–±–∞—è –ø–æ–¥–º–µ–Ω–∞

**3. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (Authentication) üÜî**
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
- –ó–∞—â–∏—Ç–∞ –æ—Ç —Ñ–∏—à–∏–Ω–≥–∞

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç HTTPS?

\`\`\`
1. –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ –ø–æ—Ä—Ç—É 443

2. TLS Handshake (—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ):
   - –ö–ª–∏–µ–Ω—Ç: "–ü—Ä–∏–≤–µ—Ç! –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é TLS 1.2, 1.3"
   - –°–µ—Ä–≤–µ—Ä: "–ü—Ä–∏–≤–µ—Ç! –í–æ—Ç –º–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á"
   - –ö–ª–∏–µ–Ω—Ç: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç ‚Üí "–û–∫–µ–π, –¥–æ–≤–µ—Ä—è—é"
   - –ö–ª–∏–µ–Ω—Ç + –°–µ—Ä–≤–µ—Ä: –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –æ–±—â–∏–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (symmetric key)

3. –®–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è:
   - –í—Å–µ –¥–∞–Ω–Ω—ã–µ —à–∏—Ñ—Ä—É—é—Ç—Å—è —ç—Ç–∏–º –∫–ª—é—á–æ–º
   - HTTP –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ

4. –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
\`\`\`

### –ß—Ç–æ —Ç–∞–∫–æ–µ SSL/TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç?

**–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** ‚Äî —Ü–∏—Ñ—Ä–æ–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π:
- –î–æ–º–µ–Ω —Å–∞–π—Ç–∞ (example.com)
- –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–ª–∞–¥–µ–ª—å—Ü–µ
- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
- –ü–æ–¥–ø–∏—Å—å Certificate Authority (CA)

**Certificate Authority (CA)** ‚Äî –¥–æ–≤–µ—Ä–µ–Ω–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è:
- Let's Encrypt (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã)
- DigiCert
- GlobalSign
- Comodo

**–ë—Ä–∞—É–∑–µ—Ä –¥–æ–≤–µ—Ä—è–µ—Ç CA:**
- –ë—Ä–∞—É–∑–µ—Ä—ã –∏–º–µ—é—Ç —Å–ø–∏—Å–æ–∫ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö CA
- –ï—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø–æ–¥–ø–∏—Å–∞–Ω –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º CA ‚Üí –∑–µ–ª–µ–Ω—ã–π –∑–∞–º–æ–∫ ‚úÖ
- –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ ‚ö†Ô∏è

---

## HTTP vs HTTPS: –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –ö—Ä–∏—Ç–µ—Ä–∏–π | HTTP | HTTPS |
|----------|------|-------|
| **–ü–æ—Ä—Ç** | 80 | 443 |
| **–ü—Ä–æ—Ç–æ–∫–æ–ª** | TCP | TCP + TLS (HTTP/1.x, 2) / QUIC (HTTP/3) |
| **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** | ‚ùå –ù–µ—Ç (plain text) | ‚úÖ –î–∞ (SSL/TLS) |
| **–°–∫–æ—Ä–æ—Å—Ç—å** | –ù–µ–º–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–µ–µ | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ (~50-100ms –ø—Ä–∏ handshake) |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | ‚ùå –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ | ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ |
| **–ü–µ—Ä–µ—Ö–≤–∞—Ç –¥–∞–Ω–Ω—ã—Ö** | ‚úÖ –õ–µ–≥–∫–æ | ‚ùå –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ |
| **SEO —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ** | –ù–∏–∂–µ | –í—ã—à–µ (Google —Ñ–∞–∫—Ç–æ—Ä) |
| **–ë—Ä–∞—É–∑–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** | "–ù–µ –∑–∞—â–∏—â–µ–Ω–æ" ‚ö†Ô∏è | –ó–µ–ª–µ–Ω—ã–π –∑–∞–º–æ–∫ üîí |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å** | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ | –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º (Let's Encrypt) |
| **API –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** | –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è production |

### –ß—Ç–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å –ø–æ HTTP?

\`\`\`http
POST /login HTTP/1.1
Host: example.com
Content-Type: application/x-www-form-urlencoded

username=john&password=secret123
\`\`\`

‚ò†Ô∏è **–≠—Ç–æ –≤–∏–¥–Ω–æ –≤ plain text!**

–õ—é–±–æ–π, –∫—Ç–æ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ç–∏ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º, –º–æ–∂–µ—Ç:
- –ü—Ä–æ—á–∏—Ç–∞—Ç—å –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å
- –£–∫—Ä–∞—Å—Ç—å cookies
- –£–≤–∏–¥–µ—Ç—å API —Ç–æ–∫–µ–Ω—ã
- –ü–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–°—Ü–µ–Ω–∞—Ä–∏–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞:**
- –ü—É–±–ª–∏—á–Ω—ã–π WiFi –≤ –∫–∞—Ñ–µ ‚òï
- –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Å–µ—Ç—å (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç –≤—Å—ë)
- ISP (–∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–ø—Ä–æ–≤–∞–π–¥–µ—Ä)
- Man-in-the-Middle –∞—Ç–∞–∫–∞

### HTTPS –∑–∞—â–∏—â–∞–µ—Ç:

\`\`\`
POST /login HTTP/1.1
Host: example.com

[–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Äî –Ω–µ—á–∏—Ç–∞–µ–º—ã–π –Ω–∞–±–æ—Ä –±–∞–π—Ç]
\`\`\`

–î–∞–∂–µ –µ—Å–ª–∏ –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–æ, **–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å** –±–µ–∑ –∫–ª—é—á–∞.

---

## TLS Handshake: –∫–∞–∫ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∑–∞—â–∏—â–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

### –®–∞–≥–∏ TLS 1.2 Handshake

\`\`\`
1. Client Hello
   –ö–ª–∏–µ–Ω—Ç ‚Üí –°–µ—Ä–≤–µ—Ä:
   "–ü—Ä–∏–≤–µ—Ç! –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é TLS 1.2, –≤–æ—Ç –º–æ–∏ cipher suites:
    - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
    - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384"

2. Server Hello
   –°–µ—Ä–≤–µ—Ä ‚Üí –ö–ª–∏–µ–Ω—Ç:
   "–ü—Ä–∏–≤–µ—Ç! –í—ã–±—Ä–∞–ª TLS 1.2 –∏ cipher: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
    –í–æ—Ç –º–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç [certificate]"

3. Certificate Verification
   –ö–ª–∏–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   ‚úÖ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø–æ–¥–ø–∏—Å–∞–Ω –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º CA?
   ‚úÖ –î–æ–º–µ–Ω —Å–æ–≤–ø–∞–¥–∞–µ—Ç?
   ‚úÖ –ù–µ –∏—Å—Ç–µ–∫?
   ‚úÖ –ù–µ –æ—Ç–æ–∑–≤–∞–Ω?

4. Key Exchange
   –ö–ª–∏–µ–Ω—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç pre-master secret
   –®–∏—Ñ—Ä—É–µ—Ç –µ–≥–æ –ø—É–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–æ–º —Å–µ—Ä–≤–µ—Ä–∞ (–∏–∑ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞)
   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ—Ä–≤–µ—Ä—É

5. Session Key Creation
   –ö–ª–∏–µ–Ω—Ç –∏ –°–µ—Ä–≤–µ—Ä –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ:
   - –í—ã—á–∏—Å–ª—è—é—Ç session key –∏–∑ pre-master secret
   - –¢–µ–ø–µ—Ä—å —É –æ–±–æ–∏—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π symmetric key

6. Finished Messages
   –ö–ª–∏–µ–Ω—Ç ‚Üí –°–µ—Ä–≤–µ—Ä: "Finished" (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ session key)
   –°–µ—Ä–≤–µ—Ä ‚Üí –ö–ª–∏–µ–Ω—Ç: "Finished" (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ session key)

7. Encrypted Communication
   –í—Å–µ HTTP –¥–∞–Ω–Ω—ã–µ —à–∏—Ñ—Ä—É—é—Ç—Å—è/—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞—é—Ç—Å—è session key
\`\`\`

**–í—Ä–µ–º—è TLS handshake:** ~1-2 RTT (Round Trip Time) ‚âà 50-200ms

**TLS 1.3 —É–ª—É—á—à–µ–Ω–∏—è:**
- –¢–æ–ª—å–∫–æ 1 RTT (–≤–º–µ—Å—Ç–æ 2)
- 0-RTT –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –£–¥–∞–ª–µ–Ω—ã —Å–ª–∞–±—ã–µ cipher suites

---

## –†–µ—à–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á

### –ó–∞–¥–∞—á–∞ 1: –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç HTTP?

**–í–æ–ø—Ä–æ—Å:** –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä–∞ HTTP?

**–û—Ç–≤–µ—Ç:** **HyperText Transfer Protocol** ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–¥–∞—á–∏ –≥–∏–ø–µ—Ä—Ç–µ–∫—Å—Ç–∞.

**–î–µ—Ç–∞–ª–∏:**
- **HyperText** ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç —Å –≥–∏–ø–µ—Ä—Å—Å—ã–ª–∫–∞–º–∏ (HTML)
- **Transfer** ‚Äî –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö
- **Protocol** ‚Äî –Ω–∞–±–æ—Ä –ø—Ä–∞–≤–∏–ª –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏

–•–æ—Ç—è –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω –¥–ª—è HTML, —Å–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ª—é–±—ã—Ö –¥–∞–Ω–Ω—ã—Ö: JSON, XML, —Ñ–∞–π–ª—ã, –≤–∏–¥–µ–æ.

---

### –ó–∞–¥–∞—á–∞ 2: –ü–æ—Ä—Ç—ã HTTP –∏ HTTPS

**–í–æ–ø—Ä–æ—Å:** –ù–∞ –∫–∞–∫–∏—Ö –ø–æ—Ä—Ç–∞—Ö —Ä–∞–±–æ—Ç–∞—é—Ç HTTP –∏ HTTPS?

**–û—Ç–≤–µ—Ç:**
- **HTTP:** –ø–æ—Ä—Ç **80**
- **HTTPS:** –ø–æ—Ä—Ç **443**

**–ü—Ä–∏–º–µ—Ä—ã:**
\`\`\`
http://example.com        ‚Üí example.com:80
http://example.com:8080   ‚Üí —è–≤–Ω–æ —É–∫–∞–∑–∞–Ω –ø–æ—Ä—Ç 8080

https://example.com       ‚Üí example.com:443
https://example.com:8443  ‚Üí —è–≤–Ω–æ —É–∫–∞–∑–∞–Ω –ø–æ—Ä—Ç 8443
\`\`\`

**–ü–æ—á–µ–º—É —Ä–∞–∑–Ω—ã–µ –ø–æ—Ä—Ç—ã?**
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ (firewall rules)
- HTTP –∏ HTTPS –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- HTTPS —Ç—Ä–µ–±—É–µ—Ç TLS, HTTP –Ω–µ—Ç

---

### –ó–∞–¥–∞—á–∞ 3: –ß—Ç–æ —Ç–∞–∫–æ–µ Stateless?

**–í–æ–ø—Ä–æ—Å:** HTTP —è–≤–ª—è–µ—Ç—Å—è stateless –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º. –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç?

**–û—Ç–≤–µ—Ç:** –°–µ—Ä–≤–µ—Ä **–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é** –æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞.

**–ü—Ä–∏–º–µ—Ä:**
\`\`\`javascript
// –ó–∞–ø—Ä–æ—Å 1: –õ–æ–≥–∏–Ω
POST /login
{"username": "john", "password": "123"}
‚Üê 200 OK {"message": "Logged in"}

// –ó–∞–ø—Ä–æ—Å 2: –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
GET /profile
‚Üê 401 Unauthorized  // ‚ùå –°–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–º–Ω–∏—Ç —á—Ç–æ –≤—ã –∑–∞–ª–æ–≥–∏–Ω–∏–ª–∏—Å—å!
\`\`\`

**–ö–∞–∫ —Ä–µ—à–∏—Ç—å?**

**–í–∞—Ä–∏–∞–Ω—Ç 1: Cookies + Session ID**
\`\`\`javascript
// –ó–∞–ø—Ä–æ—Å 1: –õ–æ–≥–∏–Ω
POST /login
{"username": "john", "password": "123"}
‚Üê 200 OK
‚Üê Set-Cookie: sessionId=abc123

// –ó–∞–ø—Ä–æ—Å 2: –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
GET /profile
Cookie: sessionId=abc123
‚Üê 200 OK {"name": "John", ...}  // ‚úÖ –°–µ—Ä–≤–µ—Ä –∑–Ω–∞–µ—Ç –≤–∞—Å –ø–æ sessionId
\`\`\`

**–í–∞—Ä–∏–∞–Ω—Ç 2: JWT —Ç–æ–∫–µ–Ω**
\`\`\`javascript
// –ó–∞–ø—Ä–æ—Å 1: –õ–æ–≥–∏–Ω
POST /login
‚Üê 200 OK {"token": "eyJhbGc..."}

// –ó–∞–ø—Ä–æ—Å 2: –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
GET /profile
Authorization: Bearer eyJhbGc...
‚Üê 200 OK  // ‚úÖ –¢–æ–∫–µ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç user_id, —Å–µ—Ä–≤–µ—Ä –∑–Ω–∞–µ—Ç –∫—Ç–æ –≤—ã
\`\`\`

---

### –ó–∞–¥–∞—á–∞ 4: –í —á—ë–º –≥–ª–∞–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ HTTPS –æ—Ç HTTP?

**–í–æ–ø—Ä–æ—Å:** –í —á—ë–º –≥–ª–∞–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ HTTPS –æ—Ç HTTP?

**–û—Ç–≤–µ—Ç:** **HTTPS —à–∏—Ñ—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ** –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º —Å –ø–æ–º–æ—â—å—é SSL/TLS.

**–ß—Ç–æ —à–∏—Ñ—Ä—É–µ—Ç—Å—è:**
- ‚úÖ HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏ (–∫—Ä–æ–º–µ Host –≤ HTTP/1.x)
- ‚úÖ –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞
- ‚úÖ Query parameters (–≤—Å—ë –ø–æ—Å–ª–µ ?)
- ‚úÖ Cookies

**–ß—Ç–æ –ù–ï —à–∏—Ñ—Ä—É–µ—Ç—Å—è (–≤–∏–¥–Ω–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É/–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å–µ—Ç–∏):**
- ‚ùå IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ (–∫—É–¥–∞ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç–µ—Å—å)
- ‚ùå –î–æ–º–µ–Ω (—á–µ—Ä–µ–∑ SNI ‚Äî Server Name Indication)
- ‚ùå –û–±—ä–µ–º –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏–º–µ—Ä:**

HTTP:
\`\`\`
–í—Å–µ –≤–∏–¥—è—Ç ‚Üí GET /api/users?search=John&password=secret123
\`\`\`

HTTPS:
\`\`\`
–í–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ ‚Üí –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ example.com:443
–ù–µ –≤–∏–¥—è—Ç ‚Üí –∫–∞–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ, –∫–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
\`\`\`

---

### –ó–∞–¥–∞—á–∞ 5: –ß—Ç–æ —Ç–∞–∫–æ–µ SSL/TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç?

**–í–æ–ø—Ä–æ—Å:** –ß—Ç–æ —Ç–∞–∫–æ–µ SSL/TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?

**–û—Ç–≤–µ—Ç:** –¶–∏—Ñ—Ä–æ–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç, **–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–π –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å** —Å–∞–π—Ç–∞ –∏ —Å–æ–¥–µ—Ä–∂–∞—â–∏–π **–ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á** –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è.

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:**
\`\`\`
Certificate:
    Serial Number: 0x1a2b3c...
    Issuer: Let's Encrypt Authority X3
    Validity:
        Not Before: Jan  1 00:00:00 2024 GMT
        Not After : Apr  1 23:59:59 2024 GMT
    Subject: CN=example.com
    Subject Public Key Info:
        RSA Public-Key: (2048 bit)
        Exponent: 65537 (0x10001)
    X509v3 Subject Alternative Name:
        DNS:example.com, DNS:www.example.com
    Signature Algorithm: sha256WithRSAEncryption
\`\`\`

**–ó–∞—á–µ–º –Ω—É–∂–µ–Ω:**
1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –¥–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ example.com (–Ω–µ —Ñ–∏—à–∏–Ω–≥)
2. **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ**: —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –¥–ª—è TLS handshake
3. **–î–æ–≤–µ—Ä–∏–µ**: –ø–æ–¥–ø–∏—Å–∞–Ω Certificate Authority (CA)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
- –ö–ª–∏–∫ –Ω–∞ –∑–∞–º–æ–∫ üîí –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
- "Certificate" ‚Üí "Valid"

---

### –ó–∞–¥–∞—á–∞ 6: –ú–æ–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å HTTP —Ç—Ä–∞—Ñ–∏–∫?

**–í–æ–ø—Ä–æ—Å:** –ú–æ–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –ø–æ HTTP?

**–û—Ç–≤–µ—Ç:** **–î–∞, –ª–µ–≥–∫–æ!** HTTP –ø–µ—Ä–µ–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ (plain text).

**–°—Ü–µ–Ω–∞—Ä–∏–π –∞—Ç–∞–∫–∏:**

\`\`\`
–í—ã –≤ –∫–∞—Ñ–µ ‚òï –ø–æ–¥–∫–ª—é—á–∏–ª–∏—Å—å –∫ –ø—É–±–ª–∏—á–Ω–æ–º—É WiFi

–ê—Ç–∞–∫—É—é—â–∏–π –≤ —Ç–æ–π –∂–µ —Å–µ—Ç–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç:
\$ wireshark

–ò –≤–∏–¥–∏—Ç:
POST /login HTTP/1.1
Host: insecure-bank.com
Content-Type: application/x-www-form-urlencoded

username=victim@email.com&password=MyPassword123
\`\`\`

‚ò†Ô∏è **–ê—Ç–∞–∫—É—é—â–∏–π —É–∫—Ä–∞–ª –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å!**

**–ó–∞—â–∏—Ç–∞:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **—Ç–æ–ª—å–∫–æ HTTPS** –¥–ª—è:
- –õ–æ–≥–∏–Ω–æ–≤ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π
- –õ–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–ª–∞—Ç–µ–∂–µ–π
- API –∑–∞–ø—Ä–æ—Å–æ–≤ —Å —Ç–æ–∫–µ–Ω–∞–º–∏

---

### –ó–∞–¥–∞—á–∞ 7: –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–æ –≤—Ä–µ–º—è TLS handshake?

**–í–æ–ø—Ä–æ—Å:** –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–æ –≤—Ä–µ–º—è TLS handshake?

**–û—Ç–≤–µ—Ç:** –ö–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä **—Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è** –∏ **–æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è –∫–ª—é—á–∞–º–∏**.

**–£–ø—Ä–æ—â–µ–Ω–Ω–æ (TLS 1.2):**

\`\`\`
1. Client Hello ‚Üí –°–µ—Ä–≤–µ—Ä
   "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é: TLS 1.2, TLS 1.3
    –•–æ—á—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: AES-256-GCM"

2. Server Hello ‚Üí –ö–ª–∏–µ–Ω—Ç
   "–û–∫–µ–π, –∏—Å–ø–æ–ª—å–∑—É–µ–º TLS 1.2 + AES-256-GCM
    –í–æ—Ç –º–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç"

3. –ö–ª–∏–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
   ‚úÖ –ü–æ–¥–ø–∏—Å–∞–Ω –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º CA
   ‚úÖ –î–æ–º–µ–Ω —Å–æ–≤–ø–∞–¥–∞–µ—Ç
   ‚úÖ –ù–µ –∏—Å—Ç–µ–∫

4. Key Exchange
   –ö–ª–∏–µ–Ω—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç random secret
   –®–∏—Ñ—Ä—É–µ—Ç –µ–≥–æ –ø—É–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–æ–º —Å–µ—Ä–≤–µ—Ä–∞
   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ—Ä–≤–µ—Ä—É

5. –û–±–∞ –≤—ã—á–∏—Å–ª—è—é—Ç session key

6. ‚úÖ –¢–µ–ø–µ—Ä—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —à–∏—Ñ—Ä—É—é—Ç—Å—è session key
\`\`\`

**–í—Ä–µ–º—è:** ~1-2 RTT (50-200ms –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞)

---

### –ó–∞–¥–∞—á–∞ 8: –ß—Ç–æ —Ç–∞–∫–æ–µ HSTS?

**–í–æ–ø—Ä–æ—Å:** –ó–∞—á–µ–º –Ω—É–∂–µ–Ω HSTS (HTTP Strict Transport Security)?

**–û—Ç–≤–µ—Ç:** HSTS **–∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –±—Ä–∞—É–∑–µ—Ä –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS** –¥–ª—è —ç—Ç–æ–≥–æ –¥–æ–º–µ–Ω–∞.

**–ü—Ä–æ–±–ª–µ–º–∞ –±–µ–∑ HSTS:**
\`\`\`
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç: example.com
–ë—Ä–∞—É–∑–µ—Ä —Å–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ—Ç—Å—è: http://example.com  ‚Üê –£—è–∑–≤–∏–º–æ!
–°–µ—Ä–≤–µ—Ä —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç: https://example.com

–ù–æ –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –ø–æ HTTP ‚Äî –∞—Ç–∞–∫—É—é—â–∏–π –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å!
\`\`\`

**–†–µ—à–µ–Ω–∏–µ: HSTS –∑–∞–≥–æ–ª–æ–≤–æ–∫**
\`\`\`http
HTTP/1.1 200 OK
Strict-Transport-Security: max-age=31536000; includeSubDomains; preload
\`\`\`

**–¢–µ–ø–µ—Ä—å:**
- –ë—Ä–∞—É–∑–µ—Ä –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç "–≤—Å–µ–≥–¥–∞ HTTPS –¥–ª—è example.com"
- –î–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–¥–µ—Ç http://example.com
- –ë—Ä–∞—É–∑–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç https://example.com
- –î–µ–π—Å—Ç–≤—É–µ—Ç 31536000 —Å–µ–∫—É–Ω–¥ (1 –≥–æ–¥)

**includeSubDomains** ‚Äî –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ api.example.com, blog.example.com

**preload** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ HSTS (hardcoded –≤ Chrome/Firefox)

---

### –ó–∞–¥–∞—á–∞ 9: HTTP/2 vs HTTP/1.1

**–í–æ–ø—Ä–æ—Å:** –í —á—ë–º –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ HTTP/2 –Ω–∞–¥ HTTP/1.1?

**–û—Ç–≤–µ—Ç:** **Multiplexing, binary protocol, server push, header compression**.

**HTTP/1.1 –ø—Ä–æ–±–ª–µ–º—ã:**
\`\`\`
–ë—Ä–∞—É–∑–µ—Ä —Ö–æ—á–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å:
- index.html
- style.css
- script.js
- image1.jpg
- image2.jpg

HTTP/1.1: –Ω—É–∂–Ω–æ 5 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (–∏–ª–∏ sequential pipeline)
\`\`\`

**HTTP/2 —Ä–µ—à–µ–Ω–∏—è:**

**1. Multiplexing** ‚Äî –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –æ–¥–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏:
\`\`\`
–û–¥–Ω–æ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ:
Stream 1: GET /index.html
Stream 2: GET /style.css      } –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ!
Stream 3: GET /script.js      }
Stream 4: GET /image1.jpg     }
\`\`\`

**2. Binary Protocol** ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ, –±—ã—Å—Ç—Ä–µ–µ –ø–∞—Ä—Å–∏—Ç—Å—è:
\`\`\`
HTTP/1.1: "GET /index.html HTTP/1.1\\r\\nHost: example.com\\r\\n"
HTTP/2: [–±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ—Ä–µ–π–º—ã]
\`\`\`

**3. Server Push** ‚Äî —Å–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ—Å—É—Ä—Å—ã –¥–æ –∑–∞–ø—Ä–æ—Å–∞:
\`\`\`
–ö–ª–∏–µ–Ω—Ç: GET /index.html
–°–µ—Ä–≤–µ—Ä:
  - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç /index.html
  - Push: /style.css (–∫–ª–∏–µ–Ω—Ç –µ—â—ë –Ω–µ –∑–∞–ø—Ä–æ—Å–∏–ª!)
  - Push: /script.js
\`\`\`

**4. HPACK Header Compression** ‚Äî —Å–∂–∏–º–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –∑–∞–≥–æ–ª–æ–≤–∫–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–∞ **30-50% –±—ã—Å—Ç—Ä–µ–µ**

---

### –ó–∞–¥–∞—á–∞ 10: HTTPS –º–µ–¥–ª–µ–Ω–Ω–µ–µ HTTP?

**–í–æ–ø—Ä–æ—Å:** –ü—Ä–∞–≤–¥–∞ –ª–∏ —á—Ç–æ HTTPS –º–µ–¥–ª–µ–Ω–Ω–µ–µ HTTP?

**–û—Ç–≤–µ—Ç:** **–° —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º hardware —Ä–∞–∑–Ω–∏—Ü–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞** (~50-100ms –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏).

**Overhead HTTPS:**

**1. TLS Handshake (–ø–µ—Ä–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ):**
- TLS 1.2: ~2 RTT (100-200ms)
- TLS 1.3: ~1 RTT (50-100ms)
- Session resumption (–ø–æ–≤—Ç–æ—Ä–Ω–æ–µ): ~0 RTT

**2. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ/–¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ:**
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ CPU –∏–º–µ—é—Ç AES-NI –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- Overhead: < 1% CPU
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–º–µ—á–∞–µ—Ç —Ä–∞–∑–Ω–∏—Ü—ã

**–ù–æ HTTP/2 –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç:**
- HTTP/2 –æ–±—ã—á–Ω–æ —Ç—Ä–µ–±—É–µ—Ç HTTPS
- Multiplexing —É—Å–∫–æ—Ä—è–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –Ω–∞ 30-50%
- **–ò—Ç–æ–≥: HTTPS + HTTP/2 —á–∞—Å—Ç–æ –±—ã—Å—Ç—Ä–µ–µ —á–µ–º HTTP/1.1**

**Benchmark:**
\`\`\`
HTTP/1.1:     1000ms –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
HTTPS/1.1:    1050ms (TLS overhead)
HTTPS/2:      700ms  (multiplexing –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç!)
\`\`\`

---

## Best Practices ‚Äî –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ üéØ

### 1. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –≤ production

**‚ùå –ü–ª–æ—Ö–æ:**
\`\`\`javascript
// API –±–µ–∑ HTTPS
fetch('http://api.example.com/login', {
  method: 'POST',
  body: JSON.stringify({ username, password })
});
// –ü–∞—Ä–æ–ª—å –≤–∏–¥–µ–Ω –≤ plain text! ‚ò†Ô∏è
\`\`\`

**‚úÖ –•–æ—Ä–æ—à–æ:**
\`\`\`javascript
fetch('https://api.example.com/login', {
  method: 'POST',
  body: JSON.stringify({ username, password })
});
// –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ ‚úÖ
\`\`\`

**–ü—Ä–∞–≤–∏–ª–æ:** HTTPS –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è:
- –õ–æ–≥–∏–Ω–æ–≤, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π
- –ü–ª–∞—Ç–µ–∂–Ω—ã—Ö —Ñ–æ—Ä–º
- –õ—é–±—ã—Ö API —Å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ü–µ—Ä–µ–¥–∞—á–∏ —Ç–æ–∫–µ–Ω–æ–≤, cookies

---

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç HTTP ‚Üí HTTPS

**‚ùå –ü–ª–æ—Ö–æ:** –û—Å—Ç–∞–≤–ª—è—Ç—å HTTP –¥–æ—Å—Ç—É–ø–Ω—ã–º
\`\`\`
http://example.com  ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç ‚ùå
\`\`\`

**‚úÖ –•–æ—Ä–æ—à–æ:** –†–µ–¥–∏—Ä–µ–∫—Ç + HSTS
\`\`\`nginx
# Nginx config
server {
    listen 80;
    server_name example.com;
    return 301 https://\$server_name\$request_uri;
}

server {
    listen 443 ssl;
    server_name example.com;

    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;

    # HSTS
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
}
\`\`\`

---

### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ TLS –≤–µ—Ä—Å–∏–∏

**‚ùå –ü–ª–æ—Ö–æ:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ä—ã—Ö TLS
\`\`\`nginx
ssl_protocols TLSv1 TLSv1.1 TLSv1.2;  # TLS 1.0/1.1 —É—è–∑–≤–∏–º—ã!
\`\`\`

**‚úÖ –•–æ—Ä–æ—à–æ:**
\`\`\`nginx
ssl_protocols TLSv1.2 TLSv1.3;  # –¢–æ–ª—å–∫–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
ssl_ciphers 'ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256';
ssl_prefer_server_ciphers off;
\`\`\`

---

### 4. –ò–∑–±–µ–≥–∞–π—Ç–µ mixed content

**‚ùå –ü–ª–æ—Ö–æ:**
\`\`\`html
<!-- HTTPS —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
<html>
  <head>
    <link rel="stylesheet" href="http://cdn.example.com/style.css">
    <!-- ‚Üë HTTP —Ä–µ—Å—É—Ä—Å –Ω–∞ HTTPS —Å—Ç—Ä–∞–Ω–∏—Ü–µ = mixed content ‚ùå -->
  </head>
</html>
\`\`\`

**‚úÖ –•–æ—Ä–æ—à–æ:**
\`\`\`html
<html>
  <head>
    <link rel="stylesheet" href="https://cdn.example.com/style.css">
    <!-- ‚Üë –í—Å–µ —Ä–µ—Å—É—Ä—Å—ã —á–µ—Ä–µ–∑ HTTPS ‚úÖ -->
  </head>
</html>
\`\`\`

**–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ protocol-relative URLs:**
\`\`\`html
<link rel="stylesheet" href="//cdn.example.com/style.css">
<!-- –ë—Ä–∞—É–∑–µ—Ä —Å–∞–º –≤—ã–±–µ—Ä–µ—Ç http –∏–ª–∏ https –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
\`\`\`

---

### 5. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏—Å—Ç–µ–∫–∞—é—Ç (–æ–±—ã—á–Ω–æ —á–µ—Ä–µ–∑ 90 –¥–Ω–µ–π –¥–ª—è Let's Encrypt)

**‚úÖ –†–µ—à–µ–Ω–∏–µ: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**
\`\`\`bash
# Certbot –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (Let's Encrypt)
sudo certbot renew --dry-run  # –¢–µ—Å—Ç
sudo certbot renew             # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

# Cron job –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
0 0 * * * certbot renew --quiet
\`\`\`

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ alerts –∑–∞ 30 –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å—ã: SSL Labs, Qualys SSL Test

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ: HTTPS —ç—Ç–æ must-have üîí

### –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

**1. HTTP –ø–µ—Ä–µ–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç–∫—Ä—ã—Ç–æ**
- –õ—é–±–æ–π –≤ —Å–µ—Ç–∏ –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å –∏ –ø—Ä–æ—á–∏—Ç–∞—Ç—å
- –ü–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã, –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —É—è–∑–≤–∏–º—ã
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è development localhost

**2. HTTPS —à–∏—Ñ—Ä—É–µ—Ç –≤—Å—ë**
- –î–∞–Ω–Ω—ã–µ –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞ (—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç)
- –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç—Å—è –ª—é–±–∞—è –ø–æ–¥–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã—Ö

**3. TLS Handshake —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞—â–∏—Ç—É**
- –ö–ª–∏–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∫–ª—é—á–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
- Overhead: ~50-100ms (–º–∏–Ω–∏–º–∞–ª–µ–Ω)

**4. HTTP/2 –¥–µ–ª–∞–µ—Ç HTTPS –±—ã—Å—Ç—Ä—ã–º**
- Multiplexing: –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- Header compression: –º–µ–Ω—å—à–µ —Ç—Ä–∞—Ñ–∏–∫–∞
- Server push: –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

**5. HTTPS –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –≤ 2024+**
- –ë—Ä–∞—É–∑–µ—Ä—ã –ø–æ–º–µ—á–∞—é—Ç HTTP –∫–∞–∫ "–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ"
- Google —Ä–∞–Ω–∂–∏—Ä—É–µ—Ç HTTPS –≤—ã—à–µ
- –ú–Ω–æ–≥–∏–µ API —Ç—Ä–µ–±—É—é—Ç HTTPS
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ–∂–∏–¥–∞—é—Ç –∑–µ–ª–µ–Ω—ã–π –∑–∞–º–æ–∫ üîí

### –ß–µ–∫-–ª–∏—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- [ ] –í—Å–µ production —Å–∞–π—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç HTTPS
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç HTTP ‚Üí HTTPS
- [ ] –î–æ–±–∞–≤–ª–µ–Ω HSTS –∑–∞–≥–æ–ª–æ–≤–æ–∫
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è TLS 1.2+ (–Ω–µ 1.0/1.1)
- [ ] –ù–µ—Ç mixed content –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
- [ ] –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] –û—Ç–∫–ª—é—á–µ–Ω—ã —Å–ª–∞–±—ã–µ cipher suites
- [ ] POST –∑–∞–ø—Ä–æ—Å—ã —Å –ø–∞—Ä–æ–ª—è–º–∏ —Ç–æ–ª—å–∫–æ –ø–æ HTTPS

### –ß—Ç–æ –¥–∞–ª—å—à–µ –∏–∑—É—á–∞—Ç—å?

- **Certificate Transparency** ‚Äî –ª–æ–≥–∏ –≤—Å–µ—Ö –≤—ã–¥–∞–Ω–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- **HTTP/3 –∏ QUIC** ‚Äî —Å–ª–µ–¥—É—é—â–µ–µ –ø–æ–∫–æ–ª–µ–Ω–∏–µ
- **Mutual TLS (mTLS)** ‚Äî –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **Content Security Policy (CSP)** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç XSS
- **DNS over HTTPS (DoH)** ‚Äî –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å DNS –∑–∞–ø—Ä–æ—Å–æ–≤

---

**üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ:**

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤–∞—à–µ–≥–æ –ª—é–±–∏–º–æ–≥–æ —Å–∞–π—Ç–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://www.ssllabs.com/ssltest/
2. –í–≤–µ–¥–∏—Ç–µ –¥–æ–º–µ–Ω —Å–∞–π—Ç–∞
3. –ò–∑—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
   - –ö–∞–∫–∞—è –≤–µ—Ä—Å–∏—è TLS –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?
   - –ö–∞–∫–æ–π —Ä–µ–π—Ç–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (A+, A, B, C, F)?
   - –í–∫–ª—é—á–µ–Ω –ª–∏ HSTS?
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ª–∏ HTTP/2?

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ç–ª–∏—á–Ω–æ–≥–æ HTTPS:**
- ‚úÖ –†–µ–π—Ç–∏–Ω–≥ A+ –Ω–∞ SSL Labs
- ‚úÖ TLS 1.3 –∏–ª–∏ –º–∏–Ω–∏–º—É–º TLS 1.2
- ‚úÖ HSTS –≤–∫–ª—é—á–µ–Ω —Å includeSubDomains
- ‚úÖ HTTP/2 –∏–ª–∏ HTTP/3
- ‚úÖ –°–∏–ª—å–Ω—ã–µ cipher suites (ECDHE, AES-GCM)

---

üí° **–ü–æ–º–Ω–∏—Ç–µ:** –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –≤–µ–±–µ HTTPS —ç—Ç–æ –Ω–µ –æ–ø—Ü–∏—è, –∞ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**!
`);

async function createHTTPHTTPSLecture() {
  console.log('üìö –°–æ–∑–¥–∞–Ω–∏–µ –ª–µ–∫—Ü–∏–∏ "HTTP –∏ HTTPS: –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"...\n');

  try {
    // 1. –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –ª–µ–∫—Ü–∏—é –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    const oldLecture = await prisma.lecture.findFirst({
      where: {
        title: {
          contains: 'HTTP –∏ HTTPS'
        }
      }
    });

    if (oldLecture) {
      console.log(`üóëÔ∏è  –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –ª–µ–∫—Ü–∏—é: ${oldLecture.id}`);
      await prisma.lecture.delete({
        where: { id: oldLecture.id }
      });
    }

    // 2. –ù–∞—Ö–æ–¥–∏–º —Ç–µ—Å—Ç
    const test = await prisma.test.findFirst({
      where: {
        title: {
          contains: 'HTTP –∏ HTTPS'
        }
      },
      include: {
        questions: {
          include: {
            question: true
          }
        }
      }
    });

    if (!test) {
      throw new Error('‚ùå –¢–µ—Å—Ç "HTTP –∏ HTTPS: –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å" –Ω–µ –Ω–∞–π–¥–µ–Ω!');
    }

    console.log(`‚úÖ –ù–∞–π–¥–µ–Ω —Ç–µ—Å—Ç: ${test.title} (${test.questions.length} –≤–æ–ø—Ä–æ—Å–æ–≤)`);

    // 3. –°–æ–∑–¥–∞–µ–º –ª–µ–∫—Ü–∏—é
    const lecture = await prisma.lecture.create({
      data: {
        title: 'HTTP –∏ HTTPS: –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å',
        topic: '–û—Å–Ω–æ–≤—ã –≤–µ–±-–ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π',
        content: lectureContent,
        createdAt: new Date(),
        updatedAt: new Date(),
      }
    });

    console.log(`‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ª–µ–∫—Ü–∏—è: ${lecture.id}`);

    // 4. –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã –∫ –ª–µ–∫—Ü–∏–∏
    console.log(`üîó –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º ${test.questions.length} –≤–æ–ø—Ä–æ—Å–æ–≤ –∫ –ª–µ–∫—Ü–∏–∏...`);

    for (const tq of test.questions) {
      await prisma.question.update({
        where: { id: tq.question.id },
        data: { lectureId: lecture.id }
      });
    }

    console.log('‚úÖ –í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –ª–µ–∫—Ü–∏–∏');

    // 5. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    const stats = {
      lectureId: lecture.id,
      title: lecture.title,
      contentLength: lecture.content.length,
      linkedQuestions: test.questions.length,
      testId: test.id,
      testTitle: test.title
    };

    console.log('\nüìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:');
    console.log(`   Lecture ID: ${stats.lectureId}`);
    console.log(`   –ù–∞–∑–≤–∞–Ω–∏–µ: ${stats.title}`);
    console.log(`   –†–∞–∑–º–µ—Ä: ${stats.contentLength} —Å–∏–º–≤–æ–ª–æ–≤ (~${Math.round(stats.contentLength / 5)} —Å–ª–æ–≤)`);
    console.log(`   –ü—Ä–∏–≤—è–∑–∞–Ω–æ –≤–æ–ø—Ä–æ—Å–æ–≤: ${stats.linkedQuestions}`);
    console.log(`   –ö —Ç–µ—Å—Ç—É: ${stats.testTitle} (${stats.testId})`);

    console.log('\n‚ú® –õ–µ–∫—Ü–∏—è "HTTP –∏ HTTPS: –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å" —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!');

    return stats;

  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ª–µ–∫—Ü–∏–∏:', error);
    throw error;
  } finally {
    await prisma.$disconnect();
  }
}

createHTTPHTTPSLecture()
  .then(() => {
    console.log('\nüéâ –°–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
    process.exit(0);
  })
  .catch((error) => {
    console.error('\nüí• –°–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à–µ–Ω —Å –æ—à–∏–±–∫–æ–π:', error);
    process.exit(1);
  });
